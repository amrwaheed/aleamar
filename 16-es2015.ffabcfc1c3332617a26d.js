(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{u4rF:function(e,t,n){"use strict";n.r(t);var r=n("ofXK"),a=n("tyNb"),i=n("fXoL");let l=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-project"]],decls:1,vars:0,template:function(e,t){1&e&&i["\u0275\u0275element"](0,"router-outlet")},directives:[a.h],styles:[""]}),e})();var o=n("uZM4"),d=n("sYmb"),s=n("944j");let c=(()=>{class e{constructor(e,t,n){this.translate=e,this.override=t,this.datepipe=n,this.entityData={name:"project",all:{columnDefs:[{headerName:this.translate.instant("id"),field:"id",checkboxSelection:!0,filter:!0,sortable:!0,editable:!1},{headerName:this.translate.instant("name"),field:this.override.isRTL()?"nameAr":"nameEn",filter:!0,checkboxSelection:!1,sortable:!0,editable:!0},{headerName:this.translate.instant("workType"),field:"workType",filter:!0,checkboxSelection:!1,sortable:!0,editable:!1},{headerName:this.translate.instant("status"),field:"projectStatus",filter:!0,checkboxSelection:!1,sortable:!0,editable:!1}]},paginated:!0,paginatedOrientation:"desc",edit:!0,view:!0,add:!0,delete:!0,upload:!1}}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](d.e),i["\u0275\u0275directiveInject"](o.a),i["\u0275\u0275directiveInject"](r.f))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-all-projects"]],decls:1,vars:1,consts:[[3,"entityData"]],template:function(e,t){1&e&&i["\u0275\u0275element"](0,"app-all-generic",0),2&e&&i["\u0275\u0275property"]("entityData",t.entityData)},directives:[s.a],styles:[""]}),e})();var p=n("3Pt+"),m=n("JuyU"),u=n("m01I"),h=n("Vaw3"),f=n("aceb"),g=n("EMTt"),v=n("pxUr"),b=n("SDzJ");function S(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"nb-list-item",13),i["\u0275\u0275elementStart"](1,"div",14),i["\u0275\u0275elementStart"](2,"file",15),i["\u0275\u0275listener"]("formValue",(function(n){i["\u0275\u0275restoreView"](e);const r=t.index;return i["\u0275\u0275nextContext"]().receiveFiles(n,r)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"div",16),i["\u0275\u0275element"](4,"input",17),i["\u0275\u0275pipe"](5,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](6,"div",3),i["\u0275\u0275element"](7,"input",18),i["\u0275\u0275pipe"](8,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](9,"div",19),i["\u0275\u0275elementStart"](10,"div",20),i["\u0275\u0275elementStart"](11,"nb-action",21),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().addProjectWorkStageFile()})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](12,"nb-action",22),i["\u0275\u0275listener"]("click",(function(){i["\u0275\u0275restoreView"](e);const n=t.index;return i["\u0275\u0275nextContext"]().removeProjectWorkStageFile(n)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("formGroup",e),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("field",n.fileField)("form",e)("isEditMode",n.isEditMode),i["\u0275\u0275advance"](2),i["\u0275\u0275propertyInterpolate"]("placeholder",i["\u0275\u0275pipeBind1"](5,6,"File Name")),i["\u0275\u0275advance"](3),i["\u0275\u0275propertyInterpolate"]("placeholder",i["\u0275\u0275pipeBind1"](8,8,"File Type"))}}let E=(()=>{class e{constructor(e,t,n,r,a,i,l,o){this.translate=e,this.override=t,this.entity=n,this.storage=r,this.route=a,this.router=i,this.fb=l,this.windowService=o,this.isEditMode=!1,this.fileField={name:"fileUrl",label:this.translate.instant("file Url"),required:!0,fromArray:!0}}ngOnInit(){this.workStageId=this.stage.controls.id.value,this.projectWorkStageFileForm=this.fb.array([]),this.projectWorkStageFileForm.length<1&&this.addProjectWorkStageFile(),this.workStageId&&(this.isEditMode=!0,this.entity.getAll(u.a.projectWorkStageFile.get+"?projectWorkStageId="+this.workStageId).then(e=>{e.subscribe(e=>{e.forEach(e=>{const t=this.fb.group({id:e.id,project:[e.project,[p.F.required,this.override.validateEntityId.bind(this)]],fileUrl:[e.fileUrl,[p.F.required]],fileName:[e.fileName,[p.F.required]],fileType:[e.fileType,[p.F.required]]});this.projectWorkStageFileForm.push(t)});var t=this.projectWorkStageFileForm.controls.findIndex(e=>null==e.value.id);this.projectWorkStageFileForm.length>1&&this.projectWorkStageFileForm.removeAt(t)})}))}receiveFiles(e,t){this.projectWorkStageFileForm.controls[t].get("fileUrl").setValue(e.fileUrl)}addProjectWorkStageFile(){const e=this.fb.group({id:null,projectWorkStage:[{id:this.workStageId},[p.F.required,this.override.validateEntityId.bind(this)]],fileUrl:[null,[p.F.required]],fileName:[null,[p.F.required]],fileType:[null,[p.F.required]]});this.projectWorkStageFileForm.push(e)}removeProjectWorkStageFile(e){if(this.projectWorkStageFileForm.length>1){let t=this.projectWorkStageFileForm.controls[e].get("fileUrl").value;null!=t&&this.deleteFile(t);let n=this.projectWorkStageFileForm.controls[e].value;null!=n.id?this.entity.delete(u.a.projectWorkStageFile.delete,n,n.id).then(t=>{t.subscribe(t=>{this.entity.showSuccessToast(t.result),this.projectWorkStageFileForm.removeAt(e)})}):this.projectWorkStageFileForm.removeAt(e)}}deleteFile(e){this.storage.storage.refFromURL(e).delete()}saveProjectFiles(){let e=this.projectWorkStageFileForm.value.filter(e=>null==e.id);this.entity.save(u.a.projectWorkStageFile.post,e).then(e=>{e.subscribe(e=>{e&&(e=e).forEach(e=>{this.projectWorkStageFileForm.controls.find(t=>t.value.fileName==e.fileName).get("id").setValue(e.id)})})})}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](d.e),i["\u0275\u0275directiveInject"](o.a),i["\u0275\u0275directiveInject"](m.a),i["\u0275\u0275directiveInject"](h.a),i["\u0275\u0275directiveInject"](a.a),i["\u0275\u0275directiveInject"](a.c),i["\u0275\u0275directiveInject"](p.f),i["\u0275\u0275directiveInject"](f.Vb))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["workStageFiles"]],inputs:{stage:"stage"},decls:34,vars:22,consts:[[1,"row"],[1,"col-10"],[1,"text-danger"],[1,"col-2"],["nbButton","","fullWidth","","hero","",3,"status","shape","size","click"],[1,"col-6","text-center"],["for","projectStatus ",1,"label","text-primary"],["for","projectStatus",1,"label","text-danger"],[1,"col-3","text-center"],["for","projectStatus",1,"label","text-primary"],[1,"col-2","text-center"],[1,"col-1","text-center"],["class","row",3,"formGroup",4,"ngFor","ngForOf"],[1,"row",3,"formGroup"],[1,"col-6"],["id","entity",3,"field","form","isEditMode","formValue"],[1,"col-3"],["type","text","formControlName","fileName","id","fileName","name","fileName","nbInput","","fullWidth","","fieldSize","medium","shape","rounded",3,"placeholder"],["type","text","readonly","","formControlName","fileType","id","fileType","name","fileType","nbInput","","fullWidth","","fieldSize","medium","shape","rounded",3,"placeholder"],[1,"col-1"],[1,"row","pt-3"],["icon","plus",1,"col-6",3,"click"],["icon","trash",1,"col-6",3,"click"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"div",1),i["\u0275\u0275elementStart"](2,"h6",2),i["\u0275\u0275text"](3),i["\u0275\u0275pipe"](4,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"div",3),i["\u0275\u0275elementStart"](6,"button",4),i["\u0275\u0275listener"]("click",(function(){return t.saveProjectFiles()})),i["\u0275\u0275text"](7),i["\u0275\u0275pipe"](8,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](9,"div",0),i["\u0275\u0275elementStart"](10,"div",5),i["\u0275\u0275elementStart"](11,"label",6),i["\u0275\u0275text"](12),i["\u0275\u0275pipe"](13,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](14,"label",7),i["\u0275\u0275text"](15,"*"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](16,"div",8),i["\u0275\u0275elementStart"](17,"label",9),i["\u0275\u0275text"](18),i["\u0275\u0275pipe"](19,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](20,"label",7),i["\u0275\u0275text"](21,"*"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](22,"div",10),i["\u0275\u0275elementStart"](23,"label",9),i["\u0275\u0275text"](24),i["\u0275\u0275pipe"](25,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](26,"label",7),i["\u0275\u0275text"](27,"*"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](28,"div",11),i["\u0275\u0275elementStart"](29,"label",9),i["\u0275\u0275text"](30),i["\u0275\u0275pipe"](31,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](32,"nb-list"),i["\u0275\u0275template"](33,S,13,10,"nb-list-item",12),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](4,10,"Files")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("status","success")("shape","round")("size","small"),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](8,12,"save Files")," "),i["\u0275\u0275advance"](5),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](13,14,"File URL")),i["\u0275\u0275advance"](6),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](19,16,"File Name")),i["\u0275\u0275advance"](6),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](25,18,"File Type")),i["\u0275\u0275advance"](6),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](31,20,"Control")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngForOf",t.projectWorkStageFileForm.controls))},directives:[f.l,f.T,r.t,f.U,p.s,p.k,b.a,p.c,f.K,p.r,p.i,f.g],pipes:[d.d],styles:[""]}),e})();function j(e,t){if(1&e&&i["\u0275\u0275element"](0,"nb-tree-grid-row-toggle",2),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("expanded",e.expanded)}}function x(e,t){1&e&&i["\u0275\u0275element"](0,"nb-icon",3)}let y=(()=>{class e{isDir(){return"dir"===this.kind}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["fs-icon"]],inputs:{kind:"kind",expanded:"expanded"},decls:3,vars:2,consts:[[3,"expanded",4,"ngIf","ngIfElse"],["fileIcon",""],[3,"expanded"],["icon","file-text-outline"]],template:function(e,t){if(1&e&&(i["\u0275\u0275template"](0,j,1,1,"nb-tree-grid-row-toggle",0),i["\u0275\u0275template"](1,x,1,0,"ng-template",null,1,i["\u0275\u0275templateRefExtractor"])),2&e){const e=i["\u0275\u0275reference"](2);i["\u0275\u0275property"]("ngIf",t.isDir())("ngIfElse",e)}},directives:[r.u,f.Rb,f.H],styles:[""]}),e})();function F(e,t){1&e&&i["\u0275\u0275element"](0,"tr",9)}function w(e,t){1&e&&i["\u0275\u0275element"](0,"tr",10)}function I(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"th",11),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("nbSortHeader",e.getSortDirection(e.customColumn)),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,2,e.customColumn)," ")}}function C(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"td",12),i["\u0275\u0275element"](1,"fs-icon",13),i["\u0275\u0275text"](2),i["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("kind",e.data.kind)("expanded",e.expanded),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",e.data[n.customColumn]," ")}}function k(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"th",11),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]().$implicit,t=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("nbSortHeader",t.getSortDirection(e)),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,2,e)," ")}}function T(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"td",12),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=i["\u0275\u0275nextContext"]().$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](e.data[n]||"-")}}function V(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0,14),i["\u0275\u0275template"](1,k,3,4,"th",6),i["\u0275\u0275template"](2,T,2,1,"td",7),i["\u0275\u0275elementContainerEnd"]()),2&e){const e=t.$implicit,n=t.index,r=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("nbTreeGridColumnDef",e)("showOn",r.getShowOn(n))}}let W=(()=>{class e{constructor(e,t,n,r){this.dataSourceBuilder=e,this.entity=t,this.dp=n,this.override=r,this.data=[],this.customColumn="user",this.defaultColumns=["date","attendanceDate","leavingDate"],this.allColumns=[this.customColumn,...this.defaultColumns],this.sortDirection=f.sb.DESCENDING}ngOnInit(){this.entity.getData(u.a.projectAttendance.get+"?projectId="+this.projectId).then(e=>{e.subscribe(e=>{this.attendances=e;let t=[],n=this.attendances.reduce((function(e,t){return(e[t.user.fullName]=e[t.user.fullName]||[]).push(t),e}),{});for(const r in n)n.hasOwnProperty(r)&&t.push({[`${r}`]:n[r]});t.forEach(e=>{let t=Object.keys(e)[0],n={data:{user:t,date:null,attendanceDate:null,leavingDate:null},children:[]};e[t].forEach(e=>{let r={data:{user:t,date:this.dp.transform(e.date,"dd/MM/yyyy"),attendanceDate:this.dp.transform(e.attendanceDate,"hh:mm:ss"),leavingDate:this.dp.transform(e.leavingDate,"hh:mm:ss")}};n.children.push(r)}),this.data.push(n)}),this.dataSource=this.dataSourceBuilder.create(this.data)})})}updateSort(e){this.sortColumn=e.column,this.sortDirection=e.direction}getSortDirection(e){return this.sortColumn===e?this.sortDirection:f.sb.NONE}getShowOn(e){return 400+100*e}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](f.Jb),i["\u0275\u0275directiveInject"](m.a),i["\u0275\u0275directiveInject"](r.f),i["\u0275\u0275directiveInject"](o.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["attendance"]],inputs:{projectId:"projectId"},decls:12,vars:7,consts:[["for","search",1,"search-label"],["nbInput","","fullWidth","","id","search",1,"search-input",3,"nbFilterInput"],[3,"nbTreeGrid","nbSort","sort"],["nbTreeGridHeaderRow","",4,"nbTreeGridHeaderRowDef"],["nbTreeGridRow","",4,"nbTreeGridRowDef","nbTreeGridRowDefColumns"],[3,"nbTreeGridColumnDef"],["nbTreeGridHeaderCell","",3,"nbSortHeader",4,"nbTreeGridHeaderCellDef"],["nbTreeGridCell","",4,"nbTreeGridCellDef"],[3,"nbTreeGridColumnDef","showOn",4,"ngFor","ngForOf"],["nbTreeGridHeaderRow",""],["nbTreeGridRow",""],["nbTreeGridHeaderCell","",3,"nbSortHeader"],["nbTreeGridCell",""],[3,"kind","expanded"],[3,"nbTreeGridColumnDef","showOn"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"nb-card"),i["\u0275\u0275elementStart"](1,"nb-card-body"),i["\u0275\u0275elementStart"](2,"label",0),i["\u0275\u0275text"](3,"Search:"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](4,"input",1),i["\u0275\u0275elementStart"](5,"table",2),i["\u0275\u0275listener"]("sort",(function(e){return t.updateSort(e)})),i["\u0275\u0275template"](6,F,1,0,"tr",3),i["\u0275\u0275template"](7,w,1,0,"tr",4),i["\u0275\u0275elementContainerStart"](8,5),i["\u0275\u0275template"](9,I,3,4,"th",6),i["\u0275\u0275template"](10,C,3,3,"td",7),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275template"](11,V,3,2,"ng-container",8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("nbFilterInput",t.dataSource),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("nbTreeGrid",t.dataSource)("nbSort",t.dataSource),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("nbTreeGridHeaderRowDef",t.allColumns),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("nbTreeGridRowDefColumns",t.allColumns),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("nbTreeGridColumnDef",t.customColumn),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngForOf",t.defaultColumns))},directives:[f.p,f.o,f.K,f.E,f.Ib,f.tb,f.Nb,f.Qb,f.Hb,f.Kb,f.Fb,r.t,f.Mb,f.Pb,f.Lb,f.ub,f.Gb,y],pipes:[d.d],styles:[""]}),e})();function B(e,t){1&e&&i["\u0275\u0275element"](0,"tr",9)}function N(e,t){1&e&&i["\u0275\u0275element"](0,"tr",10)}function D(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"th",11),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("nbSortHeader",e.getSortDirection(e.customColumn)),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,2,e.customColumn)," ")}}function P(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"td",12),i["\u0275\u0275element"](1,"fs-icon",13),i["\u0275\u0275text"](2),i["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("kind",e.data.kind)("expanded",e.expanded),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",e.data[n.customColumn]," ")}}function R(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"th",11),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]().$implicit,t=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("nbSortHeader",t.getSortDirection(e)),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,2,e)," ")}}function A(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"td",12),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=i["\u0275\u0275nextContext"]().$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](e.data[n]||"-")}}function G(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0,14),i["\u0275\u0275template"](1,R,3,4,"th",6),i["\u0275\u0275template"](2,A,2,1,"td",7),i["\u0275\u0275elementContainerEnd"]()),2&e){const e=t.$implicit,n=t.index,r=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("nbTreeGridColumnDef",e)("showOn",r.getShowOn(n))}}let L=(()=>{class e{constructor(e,t,n,r){this.dataSourceBuilder=e,this.entity=t,this.dp=n,this.override=r,this.data=[],this.customColumn="ratedUser",this.defaultColumns=["evaluator","value","comment"],this.allColumns=[this.customColumn,...this.defaultColumns],this.sortDirection=f.sb.DESCENDING}ngOnInit(){this.entity.getData(u.a.userRating.get+"?projectId="+this.projectId).then(e=>{e.subscribe(e=>{let t=[],n=e.reduce((function(e,t){return(e[t.ratedUser.fullName]=e[t.ratedUser.fullName]||[]).push(t),e}),{});for(const r in n)n.hasOwnProperty(r)&&t.push({[`${r}`]:n[r]});t.forEach(e=>{let t=Object.keys(e)[0],n={data:{ratedUser:t,evaluator:null,value:null,comment:null},children:[]};e[t].forEach(e=>{n.children.push({data:{ratedUser:t,evaluator:e.evaluator.fullName,value:e.value,comment:e.comment}})}),this.data.push(n)}),this.dataSource=this.dataSourceBuilder.create(this.data)})})}updateSort(e){this.sortColumn=e.column,this.sortDirection=e.direction}getSortDirection(e){return this.sortColumn===e?this.sortDirection:f.sb.NONE}getShowOn(e){return 400+100*e}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](f.Jb),i["\u0275\u0275directiveInject"](m.a),i["\u0275\u0275directiveInject"](r.f),i["\u0275\u0275directiveInject"](o.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["userRatings"]],inputs:{projectId:"projectId"},decls:12,vars:7,consts:[["for","search",1,"search-label"],["nbInput","","fullWidth","","id","search",1,"search-input",3,"nbFilterInput"],[3,"nbTreeGrid","nbSort","sort"],["nbTreeGridHeaderRow","",4,"nbTreeGridHeaderRowDef"],["nbTreeGridRow","",4,"nbTreeGridRowDef","nbTreeGridRowDefColumns"],[3,"nbTreeGridColumnDef"],["nbTreeGridHeaderCell","",3,"nbSortHeader",4,"nbTreeGridHeaderCellDef"],["nbTreeGridCell","",4,"nbTreeGridCellDef"],[3,"nbTreeGridColumnDef","showOn",4,"ngFor","ngForOf"],["nbTreeGridHeaderRow",""],["nbTreeGridRow",""],["nbTreeGridHeaderCell","",3,"nbSortHeader"],["nbTreeGridCell",""],[3,"kind","expanded"],[3,"nbTreeGridColumnDef","showOn"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"nb-card"),i["\u0275\u0275elementStart"](1,"nb-card-body"),i["\u0275\u0275elementStart"](2,"label",0),i["\u0275\u0275text"](3,"Search:"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](4,"input",1),i["\u0275\u0275elementStart"](5,"table",2),i["\u0275\u0275listener"]("sort",(function(e){return t.updateSort(e)})),i["\u0275\u0275template"](6,B,1,0,"tr",3),i["\u0275\u0275template"](7,N,1,0,"tr",4),i["\u0275\u0275elementContainerStart"](8,5),i["\u0275\u0275template"](9,D,3,4,"th",6),i["\u0275\u0275template"](10,P,3,3,"td",7),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275template"](11,G,3,2,"ng-container",8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("nbFilterInput",t.dataSource),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("nbTreeGrid",t.dataSource)("nbSort",t.dataSource),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("nbTreeGridHeaderRowDef",t.allColumns),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("nbTreeGridRowDefColumns",t.allColumns),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("nbTreeGridColumnDef",t.customColumn),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngForOf",t.defaultColumns))},directives:[f.p,f.o,f.K,f.E,f.Ib,f.tb,f.Nb,f.Qb,f.Hb,f.Kb,f.Fb,r.t,f.Mb,f.Pb,f.Lb,f.ub,f.Gb,y],pipes:[d.d],styles:[""]}),e})();function O(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"nb-alert",53),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate2"]("","code"," ",i["\u0275\u0275pipeBind1"](2,2,"is Invalid"),""))}function M(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"nb-alert",53),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate2"]("","nameEn"," ",i["\u0275\u0275pipeBind1"](2,2,"is Invalid"),""))}function q(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"nb-alert",53),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate2"]("","nameAr"," ",i["\u0275\u0275pipeBind1"](2,2,"is Invalid"),""))}function U(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"nb-alert",53),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate2"]("","projectStatus"," ",i["\u0275\u0275pipeBind1"](2,2,"is Invalid"),""))}function z(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"nb-alert",53),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate2"]("","workType"," ",i["\u0275\u0275pipeBind1"](2,2,"is Invalid"),""))}function H(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",76),i["\u0275\u0275elementStart"](1,"div",77),i["\u0275\u0275elementStart"](2,"nb-action",78),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](3).addEngineer()})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"nb-action",79),i["\u0275\u0275listener"]("click",(function(){i["\u0275\u0275restoreView"](e);const t=i["\u0275\u0275nextContext"]().index;return i["\u0275\u0275nextContext"](2).removeEngineerRow(t)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}}function J(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"nb-list-item",74),i["\u0275\u0275elementStart"](1,"div"),i["\u0275\u0275elementStart"](2,"entity",37),i["\u0275\u0275listener"]("formValue",(function(n){i["\u0275\u0275restoreView"](e);const r=t.index;return i["\u0275\u0275nextContext"](2).receiveProjectEngineer(n,r)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](3,H,4,0,"div",75),i["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=i["\u0275\u0275nextContext"](2);i["\u0275\u0275property"]("formGroup",e),i["\u0275\u0275advance"](1),i["\u0275\u0275attribute"]("class",n.view?"col-md-11":"col-md-9"),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("disabled",n.view)("field",n.projectEngineer)("form",e)("isEditMode",n.isEditMode),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!n.view)}}function K(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",76),i["\u0275\u0275elementStart"](1,"div",77),i["\u0275\u0275elementStart"](2,"nb-action",78),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](3).addProjectWorkStage()})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"nb-action",79),i["\u0275\u0275listener"]("click",(function(){i["\u0275\u0275restoreView"](e);const t=i["\u0275\u0275nextContext"]().index;return i["\u0275\u0275nextContext"](2).removProjectWorkStage(t)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}}function _(e,t){if(1&e&&i["\u0275\u0275element"](0,"workStageFiles",84),2&e){const e=i["\u0275\u0275nextContext"]().$implicit;i["\u0275\u0275property"]("stage",e)}}function Q(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"nb-list-item",74),i["\u0275\u0275elementStart"](1,"div",38),i["\u0275\u0275elementStart"](2,"entity",37),i["\u0275\u0275listener"]("formValue",(function(n){i["\u0275\u0275restoreView"](e);const r=t.index;return i["\u0275\u0275nextContext"](2).receiveWorkStage(n,r)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"div",80),i["\u0275\u0275element"](4,"input",81),i["\u0275\u0275pipe"](5,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](6,"div"),i["\u0275\u0275elementStart"](7,"button",82),i["\u0275\u0275listener"]("click",(function(){i["\u0275\u0275restoreView"](e);const t=i["\u0275\u0275reference"](12);return i["\u0275\u0275nextContext"](2).showWorkStageFiles(t)})),i["\u0275\u0275text"](8),i["\u0275\u0275pipe"](9,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](10,K,4,0,"div",75),i["\u0275\u0275template"](11,_,1,1,"ng-template",null,83,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=i["\u0275\u0275nextContext"](2);i["\u0275\u0275property"]("formGroup",e),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("disabled",n.view)("field",n.workStage)("form",e)("isEditMode",n.isEditMode),i["\u0275\u0275advance"](2),i["\u0275\u0275propertyInterpolate"]("placeholder",i["\u0275\u0275pipeBind1"](5,15,"completion Rate")),i["\u0275\u0275advance"](2),i["\u0275\u0275attribute"]("class",n.view?"col-md-5":"col-md-3"),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("status","warning")("id",e.get("id"))("disabled",!n.projectWorkStagesForm.valid)("shape","rectangle")("size","small")("disabled",null==e.get("id")),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](9,17,"Files")," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!n.view)}}function X(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",90),i["\u0275\u0275elementStart"](1,"div",77),i["\u0275\u0275elementStart"](2,"nb-action",91),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](3).addProjectFile()})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"nb-action",92),i["\u0275\u0275listener"]("click",(function(){i["\u0275\u0275restoreView"](e);const t=i["\u0275\u0275nextContext"]().index;return i["\u0275\u0275nextContext"](2).removeProjectFile(t)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}}function Y(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"nb-list-item",74),i["\u0275\u0275elementStart"](1,"div",85),i["\u0275\u0275elementStart"](2,"file",37),i["\u0275\u0275listener"]("formValue",(function(n){i["\u0275\u0275restoreView"](e);const r=t.index;return i["\u0275\u0275nextContext"](2).receiveFiles(n,r)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"div",86),i["\u0275\u0275element"](4,"input",87),i["\u0275\u0275pipe"](5,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](6,"div"),i["\u0275\u0275element"](7,"input",88),i["\u0275\u0275pipe"](8,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](9,X,4,0,"div",89),i["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=i["\u0275\u0275nextContext"](2);i["\u0275\u0275property"]("formGroup",e),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("disabled",n.view)("field",n.fileField)("form",e)("isEditMode",n.isEditMode),i["\u0275\u0275advance"](2),i["\u0275\u0275propertyInterpolate"]("placeholder",i["\u0275\u0275pipeBind1"](5,9,"FileName")),i["\u0275\u0275advance"](2),i["\u0275\u0275attribute"]("class",n.view?"col-3":"col-2"),i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate"]("placeholder",i["\u0275\u0275pipeBind1"](8,11,"FileType")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!n.view)}}function Z(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",54),i["\u0275\u0275elementStart"](1,"div",2),i["\u0275\u0275elementStart"](2,"div",55),i["\u0275\u0275elementStart"](3,"nb-card"),i["\u0275\u0275elementStart"](4,"nb-card-header"),i["\u0275\u0275elementStart"](5,"div",2),i["\u0275\u0275elementStart"](6,"div",56),i["\u0275\u0275elementStart"](7,"h6",13),i["\u0275\u0275text"](8),i["\u0275\u0275pipe"](9,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](10,"div",57),i["\u0275\u0275elementStart"](11,"button",58),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().saveEngineers()})),i["\u0275\u0275text"](12),i["\u0275\u0275pipe"](13,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](14,"nb-card-body",59),i["\u0275\u0275elementStart"](15,"div",2),i["\u0275\u0275elementStart"](16,"div",60),i["\u0275\u0275elementStart"](17,"label",25),i["\u0275\u0275text"](18),i["\u0275\u0275pipe"](19,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](20,"label",26),i["\u0275\u0275text"](21,"*"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](22,"div",61),i["\u0275\u0275elementStart"](23,"label",25),i["\u0275\u0275text"](24),i["\u0275\u0275pipe"](25,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](26,"nb-list"),i["\u0275\u0275template"](27,J,4,7,"nb-list-item",62),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](28,"div",63),i["\u0275\u0275elementStart"](29,"nb-card"),i["\u0275\u0275elementStart"](30,"nb-card-header"),i["\u0275\u0275elementStart"](31,"div",2),i["\u0275\u0275elementStart"](32,"div",56),i["\u0275\u0275elementStart"](33,"h6",13),i["\u0275\u0275text"](34),i["\u0275\u0275pipe"](35,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](36,"div",57),i["\u0275\u0275elementStart"](37,"button",58),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().saveWorkStages()})),i["\u0275\u0275text"](38),i["\u0275\u0275pipe"](39,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](40,"nb-card-body",59),i["\u0275\u0275elementStart"](41,"div",2),i["\u0275\u0275elementStart"](42,"div",64),i["\u0275\u0275elementStart"](43,"label",65),i["\u0275\u0275text"](44),i["\u0275\u0275pipe"](45,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](46,"label",26),i["\u0275\u0275text"](47,"*"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](48,"div",66),i["\u0275\u0275elementStart"](49,"label",25),i["\u0275\u0275text"](50),i["\u0275\u0275pipe"](51,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](52,"label",26),i["\u0275\u0275text"](53,"*"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](54,"div",61),i["\u0275\u0275elementStart"](55,"label",67),i["\u0275\u0275text"](56),i["\u0275\u0275pipe"](57,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](58,"div",61),i["\u0275\u0275elementStart"](59,"label",25),i["\u0275\u0275text"](60),i["\u0275\u0275pipe"](61,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](62,"nb-list"),i["\u0275\u0275template"](63,Q,13,19,"nb-list-item",62),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](64,"div",3),i["\u0275\u0275elementStart"](65,"nb-card"),i["\u0275\u0275elementStart"](66,"nb-card-header"),i["\u0275\u0275elementStart"](67,"div",2),i["\u0275\u0275elementStart"](68,"div",68),i["\u0275\u0275elementStart"](69,"h6",13),i["\u0275\u0275text"](70),i["\u0275\u0275pipe"](71,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](72,"div",69),i["\u0275\u0275elementStart"](73,"button",58),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().saveProjectFiles()})),i["\u0275\u0275text"](74),i["\u0275\u0275pipe"](75,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](76,"nb-card-body",59),i["\u0275\u0275elementStart"](77,"div",2),i["\u0275\u0275elementStart"](78,"div",70),i["\u0275\u0275elementStart"](79,"label",65),i["\u0275\u0275text"](80),i["\u0275\u0275pipe"](81,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](82,"label",26),i["\u0275\u0275text"](83,"*"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](84,"div",71),i["\u0275\u0275elementStart"](85,"label",25),i["\u0275\u0275text"](86),i["\u0275\u0275pipe"](87,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](88,"label",26),i["\u0275\u0275text"](89,"*"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](90,"div",72),i["\u0275\u0275elementStart"](91,"label",25),i["\u0275\u0275text"](92),i["\u0275\u0275pipe"](93,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](94,"label",26),i["\u0275\u0275text"](95,"*"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](96,"div",73),i["\u0275\u0275elementStart"](97,"label",25),i["\u0275\u0275text"](98),i["\u0275\u0275pipe"](99,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](100,"nb-list"),i["\u0275\u0275template"](101,Y,10,13,"nb-list-item",62),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](8),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](9,31,"Engineers")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("status","success")("disabled",!e.projectEngineersForm.valid||e.view)("shape","round")("size","small"),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](13,33,"saveengineers")," "),i["\u0275\u0275advance"](6),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](19,35,"SelectEngineer")),i["\u0275\u0275advance"](6),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](25,37,"Control")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngForOf",e.projectEngineersForm.controls),i["\u0275\u0275advance"](7),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](35,39,"workStage")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("status","success")("disabled",!e.projectWorkStagesForm.valid||e.view)("shape","round")("size","small"),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](39,41,"savestages")," "),i["\u0275\u0275advance"](6),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](45,43,"SelectStage")),i["\u0275\u0275advance"](6),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](51,45,"completionRate")),i["\u0275\u0275advance"](6),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](57,47,"Files")),i["\u0275\u0275advance"](4),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](61,49,"Control")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngForOf",e.projectWorkStagesForm.controls),i["\u0275\u0275advance"](7),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](71,51,"Files")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("status","success")("disabled",!e.projectFilesForm.valid)("shape","round")("size","small"),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](75,53,"saveFiles")," "),i["\u0275\u0275advance"](6),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](81,55,"FileURL")),i["\u0275\u0275advance"](6),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](87,57,"FileName")),i["\u0275\u0275advance"](6),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](93,59,"FileType")),i["\u0275\u0275advance"](6),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](99,61,"Control")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngForOf",e.projectFilesForm.controls)}}function ee(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"nb-tab",93),i["\u0275\u0275pipe"](1,"translate"),i["\u0275\u0275element"](2,"attendance",94),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275propertyInterpolate"]("tabTitle",i["\u0275\u0275pipeBind1"](1,2,"Attendances")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("projectId",e.entityId)}}function te(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"nb-tab",93),i["\u0275\u0275pipe"](1,"translate"),i["\u0275\u0275element"](2,"userRatings",94),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275propertyInterpolate"]("tabTitle",i["\u0275\u0275pipeBind1"](1,2,"User Ratings")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("projectId",e.entityId)}}let ne=(()=>{class e{constructor(e,t,n,r,a,i,l,o){this.translate=e,this.override=t,this.entity=n,this.storage=r,this.route=a,this.router=i,this.fb=l,this.windowService=o,this.isEditMode=!1,this.project={id:null,code:null,nameAr:null,nameEn:null,projectStatus:null,workType:null,locationLat:null,locationLng:null,areaRadius:null,projectCategory:{id:null},projectManager:{id:null},projectOwner:{id:null},contractor:{id:null},projectEngineers:[],projectWorkStages:[],projectFiles:[]},this.view=!1,this.projectCategory={name:"projectCategory",from:"projectCategory",label:this.translate.instant("projectCategory"),required:!0,isEntity:!0,fromArray:!1,optionName:this.override.isRTL()?"nameAr":"nameEn",disabled:!1,exludeView:["iconUrl","imageUrl"]},this.projectManager={name:"projectManager",from:"User",label:this.translate.instant("projectManager"),required:!0,isEntity:!0,fromArray:!1,optionName:"fullName",disabled:!1,pathParams:[{key:"userType",value:"manager"}],exludeView:["fcmToken","imageUrl","customPermessionGroup","createdAt","userType"]},this.projectOwner={name:"projectOwner",from:"User",label:this.translate.instant("projectOwner"),required:!0,isEntity:!0,fromArray:!1,optionName:"fullName",disabled:!1,pathParams:[{key:"userType",value:"client"}],exludeView:["fcmToken","imageUrl","customPermessionGroup","createdAt","userType"]},this.contractor={name:"contractor",from:"User",label:this.translate.instant("contractor"),required:!0,isEntity:!0,fromArray:!1,optionName:"fullName",disabled:!1,pathParams:[{key:"userType",value:"contractor"}],exludeView:["fcmToken","imageUrl","customPermessionGroup","createdAt","userType"]},this.zoom=15,this.radiusLat=29.9968975,this.radiusLng=31.3207497,this.marker={lat:29.9968975,lng:31.3207497,label:this.project.nameEn,draggable:!0},this.projectEngineer={name:"engineer",from:"User",label:this.translate.instant("projectManager"),required:!0,isEntity:!0,fromArray:!0,optionName:"fullName",disabled:!1,pathParams:[{key:"userType",value:"engineer"}],exludeView:["fcmToken","imageUrl","customPermessionGroup","createdAt","userType"]},this.workStage={name:"workStage",from:"workStage",label:this.translate.instant("workStage"),required:!0,isEntity:!0,fromArray:!0,optionName:this.override.isRTL()?"nameAr":"nameEn",disabled:!1,exludeView:["createdAt","updatedAt"]},this.fileField={name:"fileUrl",label:this.translate.instant("file Url"),required:!0,fromArray:!0}}ngOnInit(){this.forms=this.fb.group({id:null,code:[null,[p.F.required,p.F.minLength(3)]],nameAr:[null,[p.F.required,p.F.minLength(3)]],nameEn:[null,[p.F.required,p.F.minLength(3)]],projectStatus:[null,[p.F.required]],workType:[null,[p.F.required]],locationLat:[29.9968975,[p.F.min(0)]],locationLng:[31.3207497,[p.F.min(0)]],areaRadius:[20,[p.F.min(20)]],projectCategory:[null,[p.F.required,this.override.validateEntityId.bind(this)]],projectManager:[null,[p.F.required]],projectOwner:[null,[p.F.required]],contractor:[null,[p.F.required]]}),this.projectEngineersForm=this.fb.array([]),this.projectWorkStagesForm=this.fb.array([]),this.projectFilesForm=this.fb.array([]),this.projectEngineersForm.length<1&&this.addEngineer(),this.projectWorkStagesForm.length<1&&this.addProjectWorkStage(),this.projectFilesForm.length<1&&this.addProjectFile(),this.entityId=this.route.snapshot.paramMap.get("entityId"),console.log(this.entityId),this.entityId&&(this.route.snapshot.routeConfig.path.startsWith("view")&&(this.view=!0),this.isEditMode=!0,this.entity.getOne(u.a.project.getOne,this.entityId).then(e=>{e.subscribe(e=>{this.radiusLat=e.locationLat,this.radiusLng=e.locationLng,this.forms.get("id").setValue(e.id),this.forms.get("code").setValue(e.code),this.forms.get("nameAr").setValue(e.nameAr),this.forms.get("nameEn").setValue(e.nameEn),this.forms.get("projectStatus").setValue(e.projectStatus),this.forms.get("workType").setValue(e.workType),this.forms.get("areaRadius").setValue(e.areaRadius),this.forms.get("locationLat").setValue(e.locationLat),this.forms.get("locationLng").setValue(e.locationLng),this.forms.get("projectCategory").setValue(e.projectCategory),this.forms.get("projectOwner").setValue(e.projectOwner),this.forms.get("projectManager").setValue(e.projectManager),this.forms.get("contractor").setValue(e.contractor),this.projectEngineersForm.controls[0].get("project").setValue({id:e.id}),this.projectWorkStagesForm.controls[0].get("project").setValue({id:e.id}),this.projectFilesForm.controls[0].get("project").setValue({id:e.id}),e.projectEngineers.forEach(e=>{const t=this.fb.group({id:e.id,engineer:[e.engineer,[p.F.required,this.override.validateEntityId.bind(this)]],project:[e.project,[p.F.required,this.override.validateEntityId.bind(this)]]});this.projectEngineersForm.push(t)});var t=this.projectEngineersForm.controls.findIndex(e=>null==e.value.id);this.projectEngineersForm.length>1&&this.projectEngineersForm.removeAt(t),e.projectWorkStages.forEach(e=>{const t=this.fb.group({id:e.id,workStage:[e.workStage,[p.F.required,this.override.validateEntityId.bind(this)]],project:[e.project,[p.F.required,this.override.validateEntityId.bind(this)]],completionRate:[e.completionRate,[p.F.required,p.F.min(0),p.F.max(100)]]});this.projectWorkStagesForm.push(t)}),t=this.projectWorkStagesForm.controls.findIndex(e=>null==e.value.id),this.projectWorkStagesForm.length>1&&this.projectWorkStagesForm.removeAt(t),e.projectFiles.forEach(e=>{const t=this.fb.group({id:e.id,project:[e.project,[p.F.required,this.override.validateEntityId.bind(this)]],fileUrl:[e.fileUrl,[p.F.required]],fileName:[e.fileName,[p.F.required]],fileType:[e.fileType,[p.F.required]]});this.projectFilesForm.push(t)}),t=this.projectFilesForm.controls.findIndex(e=>null==e.value.id),this.projectFilesForm.length>1&&this.projectFilesForm.removeAt(t)})}))}receiveProjectCategory(e){this.forms.get("projectCategory").setValue(e.projectCategory)}receiveProjectManager(e){this.forms.get("projectManager").setValue(e.projectManager)}receiveProjectOwner(e){this.forms.get("projectOwner").setValue(e.projectOwner)}receiveContractor(e){this.forms.get("contractor").setValue(e.contractor)}circleDragEnd(e){let t=e.coords.lat,n=e.coords.lng;this.forms.get("locationLat").setValue(t),this.forms.get("locationLng").setValue(n)}circleRadiusChanged(e){this.forms.get("areaRadius").setValue(e)}mapClicked(e){this.marker={lat:e.coords.lat,lng:e.coords.lng,draggable:!0},this.forms.get("locationLat").setValue(this.marker.lat),this.forms.get("locationLng").setValue(this.marker.lng)}print(){window.print()}onSubmit(){let e=this.forms.value;e.locationLat=this.forms.get("locationLat").value,e.locationLng=this.forms.get("locationLng").value,e.areaRadius=this.forms.get("areaRadius").value,this.isEditMode?this.entity.update(u.a.project.put,e,this.entityId).then(e=>{e.subscribe(e=>{this.forms.get("id").setValue(e.id),this.forms.get("code").setValue(e.code),this.forms.get("nameAr").setValue(e.nameAr),this.forms.get("nameEn").setValue(e.nameEn),this.forms.get("projectStatus").setValue(e.projectStatus),this.forms.get("workType").setValue(e.workType),this.forms.get("areaRadius").setValue(e.areaRadius),this.forms.get("locationLat").setValue(e.locationLat),this.forms.get("locationLng").setValue(e.locationLng),this.forms.get("projectCategory").setValue(e.projectCategory),this.forms.get("projectOwner").setValue(e.projectOwner),this.forms.get("projectManager").setValue(e.projectManager),this.forms.get("contractor").setValue(e.contractor),this.projectSaved=!0,this.scrollToSection("projectAdditionalData"),this.projectEngineersForm.controls[0].get("project").setValue({id:e.id}),this.projectWorkStagesForm.controls[0].get("project").setValue({id:e.id}),this.projectFilesForm.controls[0].get("project").setValue({id:e.id})})}):this.entity.save(u.a.project.post,e).then(e=>{e.subscribe(e=>{this.forms.get("id").setValue(e.id),this.entityId=e.id,this.forms.get("code").setValue(e.code),this.forms.get("nameAr").setValue(e.nameAr),this.forms.get("nameEn").setValue(e.nameEn),this.forms.get("projectStatus").setValue(e.projectStatus),this.forms.get("workType").setValue(e.workType),this.forms.get("areaRadius").setValue(e.areaRadius),this.forms.get("locationLat").setValue(e.locationLat),this.forms.get("locationLng").setValue(e.locationLng),this.forms.get("projectCategory").setValue(e.projectCategory),this.forms.get("projectOwner").setValue(e.projectOwner),this.forms.get("projectManager").setValue(e.projectManager),this.forms.get("contractor").setValue(e.contractor),this.projectSaved=!0,this.scrollToSection("projectAdditionalData"),this.projectEngineersForm.controls[0].get("project").setValue({id:e.id}),this.projectWorkStagesForm.controls[0].get("project").setValue({id:e.id}),this.projectFilesForm.controls[0].get("project").setValue({id:e.id})})})}scrollToSection(e){0!=$(".section-"+e).length&&$("html, body").animate({scrollTop:$(".section-"+e).offset().top},1e3)}receiveProjectEngineer(e,t){this.projectEngineersForm.controls[t].get("engineer").setValue(e.engineer)}addEngineer(){const e=this.fb.group({id:null,engineer:[null,[p.F.required,this.override.validateEntityId.bind(this)]],project:[{id:this.forms.get("id").value},[p.F.required,this.override.validateEntityId.bind(this)]]});this.projectEngineersForm.push(e)}removeEngineerRow(e){let t=this.projectEngineersForm.controls[e].value;console.log(t),null!=t.id?this.entity.delete(u.a.projectEngineer.delete,t,t.id).then(t=>{t.subscribe(t=>{this.entity.showSuccessToast(t.result),this.projectEngineersForm.removeAt(e),0===this.projectEngineersForm.length&&this.addEngineer()})}):this.projectEngineersForm.removeAt(e)}saveEngineers(){let e=this.projectEngineersForm.value;e.forEach(e=>{if(null===e.project.id)throw this.entity.showErrorToast(null,this.translate.instant("Project Not Saved please save it")),new Error(this.translate.instant("Project Not Saved please save it"))});let t=e.filter(e=>null===e.id);console.log(t),this.entity.save(u.a.projectEngineer.post,e).then(e=>{e.subscribe(e=>{e&&(console.log(e),(e=e).forEach(e=>{this.projectEngineersForm.controls.find(t=>t.value.fileName==e.fileName).get("id").setValue(e.id)}))})}).catch(e=>{console.log(e)})}receiveWorkStage(e,t){this.projectWorkStagesForm.controls[t].get("workStage").setValue(e.workStage)}addProjectWorkStage(){const e=this.fb.group({id:null,workStage:[null,[p.F.required,this.override.validateEntityId.bind(this)]],project:[{id:this.forms.get("id").value},[p.F.required,this.override.validateEntityId.bind(this)]],completionRate:[0,[p.F.required,p.F.min(0),p.F.max(100)]]});this.projectWorkStagesForm.push(e)}removProjectWorkStage(e){let t=this.projectWorkStagesForm.controls[e].value;null!=t.id?this.entity.delete(u.a.projectWorkStage.delete,t,t.id).then(t=>{t.subscribe(t=>{this.entity.showSuccessToast(t.result),this.projectWorkStagesForm.removeAt(e),0===this.projectWorkStagesForm.length&&this.addProjectWorkStage()})}):this.projectWorkStagesForm.removeAt(e)}saveWorkStages(){let e=this.projectWorkStagesForm.value;e.forEach(e=>{if(null===e.project.id)throw this.entity.showErrorToast(null,this.translate.instant("Project Not Saved please save it")),new Error(this.translate.instant("Project Not Saved please save it"))});let t=e.filter(e=>null==e.id),n=e.filter(e=>null!=e.id);t.forEach(e=>{this.entity.save(u.a.projectWorkStage.post,[e]).then(e=>{e.subscribe(e=>{e&&(this.projectWorkStagesForm.patchValue(e),console.log(this.projectWorkStagesForm.value))})})}),n.forEach(e=>{this.entity.update(u.a.projectWorkStage.put,e,e.id).then(e=>{e.subscribe(e=>{e&&(this.projectWorkStagesForm.patchValue(e),console.log(this.projectWorkStagesForm.value))})})})}receiveFiles(e,t){this.projectFilesForm.controls[t].get("fileUrl").setValue(e.fileUrl)}addProjectFile(){const e=this.fb.group({id:null,project:[{id:this.forms.get("id").value},[p.F.required,this.override.validateEntityId.bind(this)]],fileUrl:[null,[p.F.required]],fileName:[null,[p.F.required]],fileType:[null,[p.F.required]]});this.projectFilesForm.push(e)}removeProjectFile(e){let t=this.projectFilesForm.controls[e].get("fileUrl").value;null!=t&&this.deleteFile(t);let n=this.projectFilesForm.controls[e].value;null!=n.id?this.entity.delete(u.a.projectFile.delete,n,n.id).then(t=>{t.subscribe(t=>{this.entity.showSuccessToast(t.result),this.projectFilesForm.removeAt(e),0===this.projectFilesForm.length&&this.addProjectFile()})}):this.projectFilesForm.removeAt(e)}saveProjectFiles(){let e=this.projectFilesForm.value;e.forEach(e=>{if(null===e.project.id)throw this.entity.showErrorToast(null,this.translate.instant("Project Not Saved please save it")),new Error(this.translate.instant("Project Not Saved please save it"))});let t=e.filter(e=>null==e.id);this.entity.save(u.a.projectFile.post,t).then(e=>{e.subscribe(e=>{e&&(e=e).forEach(e=>{this.projectFilesForm.controls.find(t=>t.value.fileName==e.fileName).get("id").setValue(e.id)})})})}deleteFile(e){this.storage.storage.refFromURL(e).delete()}showWorkStageFiles(e){this.windowRef=this.windowService.open(e,{title:"Select ",closeOnEsc:!0,hasBackdrop:!0,windowClass:"danger"})}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](d.e),i["\u0275\u0275directiveInject"](o.a),i["\u0275\u0275directiveInject"](m.a),i["\u0275\u0275directiveInject"](h.a),i["\u0275\u0275directiveInject"](a.a),i["\u0275\u0275directiveInject"](a.c),i["\u0275\u0275directiveInject"](p.f),i["\u0275\u0275directiveInject"](f.Vb))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-project-control"]],decls:145,vars:131,consts:[["active","",3,"tabTitle"],[3,"formGroup"],[1,"row"],[1,"col-md-12"],[1,"row","colors"],[1,"col-8","item","text-heading"],[1,"col"],[1,"text-info"],[1,"col","text-center"],["nbButton","","hero","","nbPopover","alt + a","nbPopoverTrigger","hint","nbPopoverPlacement","right","accesskey","a","routerLink","/pages/project/all",3,"status","shape","size"],["nbButton","","hero","","nbPopover","alt + s","nbPopoverTrigger","hint","nbPopoverPlacement","right","accesskey","s",3,"status","shape","disabled","size","click"],["nbButton","","hero","","nbPopover","alt + p","nbPopoverTrigger","hint","nbPopoverPlacement","right","accesskey","p",3,"status","shape","disabled","size","click"],[1,"col-md-6"],[1,"text-danger"],["for","code",1,"label"],["for","code",1,"label","text-danger"],["type","text","formControlName","code","id","code","name","code","nbInput","","fullWidth","","fieldSize","medium","shape","rectangle",3,"placeholder"],["code",""],["status","warning","accent","primary",4,"ngIf"],["for","nameEn",1,"label"],["for","nameEn",1,"label","text-danger"],["type","text","formControlName","nameEn","id","nameEn","name","nameEn","nbInput","","fullWidth","","fieldSize","medium","shape","rectangle",3,"placeholder"],["for","nameAr",1,"label"],["for","nameAr",1,"label","text-danger"],["type","text","formControlName","nameAr","id","nameAr","name","nameAr","nbInput","","fullWidth","","fieldSize","medium","shape","rectangle",3,"placeholder"],["for","projectStatus",1,"label"],["for","projectStatus",1,"label","text-danger"],["id","projectStatus","formControlName","projectStatus","name","projectStatus","fullWidth","","fieldSize","medium","shape","rectangle",3,"disabled","placeholder"],["value","active"],["value","stopped"],["value","ended"],["for","workType",1,"label"],["for","workType",1,"label","text-danger"],["id","workType","formControlName","workType","name","workType","fullWidth","","fieldSize","medium","shape","rectangle",3,"disabled","placeholder"],["value","design"],["value","supervision"],["value","designAndSupervision"],["id","entity",3,"disabled","field","form","isEditMode","formValue"],[1,"col-md-4"],["for","locationLat",1,"label"],["for","locationLat",1,"label","text-danger"],["type","number","formControlName","locationLat","id","locationLat","name","locationLat","step","0.001","nbInput","","fullWidth","","fieldSize","medium","shape","rectangle",3,"placeholder"],["for","locationLng",1,"label"],["for","locationLng",1,"label","text-danger"],["type","number","formControlName","locationLng","id","locationLng","name","locationLng","step","0.001","nbInput","","fullWidth","","fieldSize","medium","shape","rectangle",3,"placeholder"],["for","areaRadius",1,"label"],["for","areaRadius",1,"label","text-danger"],["type","number","formControlName","areaRadius","id","areaRadius","name","areaRadius","nbInput","","fullWidth","","fieldSize","medium","shape","rectangle",3,"placeholder"],[1,"row","pt-2"],[3,"latitude","longitude","zoom","disableDefaultUI","zoomControl","mapClick"],[3,"latitude","longitude","radius","fillColor","fillOpacity","circleDraggable","editable","dragEnd","radiusChange"],["class","section-projectAdditionalData",4,"ngIf"],[3,"tabTitle",4,"ngIf"],["status","warning","accent","primary"],[1,"section-projectAdditionalData"],[1,"col-md-5"],[1,"col-8"],[1,"col-4"],["nbButton","","fullWidth","","hero","",3,"status","disabled","shape","size","click"],[1,"listCard"],[1,"col-md-9","text-center"],[1,"col-md-2","text-center"],["class","row",3,"formGroup",4,"ngFor","ngForOf"],[1,"col-md-7"],[1,"col-md-4","text-center"],["for","projectStatus ",1,"label"],[1,"col-md-3","text-center"],["for","files",1,"label"],[1,"col-10"],[1,"col-2"],[1,"col-6","text-center"],[1,"col-3","text-center"],[1,"col-2","text-center"],[1,"col-1","text-center"],[1,"row",3,"formGroup"],["class","col-md-2",4,"ngIf"],[1,"col-md-2"],[1,"row","pt-3"],["icon","plus",1,"col-md-6",3,"click"],["icon","trash",1,"col-md-6",3,"click"],[1,"col-md-3"],["type","number","min","0","max","100","formControlName","completionRate","id","completionRate","name","completionRate","nbInput","","fullWidth","","fieldSize","medium","shape","rectangle",3,"placeholder"],["nbButton","","fullWidth","","hero","",3,"status","id","disabled","shape","size","click"],["contentTemplate",""],[3,"stage"],[1,"col-6"],[1,"col-3"],["type","text","formControlName","fileName","id","fileName","name","fileName","nbInput","","fullWidth","","fieldSize","medium","shape","rounded",3,"placeholder"],["type","text","formControlName","fileType","id","fileType","name","fileType","nbInput","","fullWidth","","fieldSize","medium","shape","rounded",3,"placeholder"],["class","col-1",4,"ngIf"],[1,"col-1"],["icon","plus",1,"col-6",3,"click"],["icon","trash",1,"col-6",3,"click"],[3,"tabTitle"],[3,"projectId"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"nb-tabset"),i["\u0275\u0275elementStart"](1,"nb-tab",0),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementStart"](3,"form",1),i["\u0275\u0275elementStart"](4,"div",2),i["\u0275\u0275elementStart"](5,"nb-card",3),i["\u0275\u0275elementStart"](6,"nb-card-header",4),i["\u0275\u0275elementStart"](7,"div",5),i["\u0275\u0275elementStart"](8,"div",2),i["\u0275\u0275elementStart"](9,"div",6),i["\u0275\u0275elementStart"](10,"h4",7),i["\u0275\u0275text"](11),i["\u0275\u0275pipe"](12,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](13,"div",8),i["\u0275\u0275elementStart"](14,"button",9),i["\u0275\u0275text"](15),i["\u0275\u0275pipe"](16,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](17,"div",8),i["\u0275\u0275elementStart"](18,"button",10),i["\u0275\u0275listener"]("click",(function(){return t.onSubmit()})),i["\u0275\u0275text"](19),i["\u0275\u0275pipe"](20,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](21,"div",8),i["\u0275\u0275elementStart"](22,"button",11),i["\u0275\u0275listener"]("click",(function(){return t.print()})),i["\u0275\u0275text"](23),i["\u0275\u0275pipe"](24,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](25,"div",2),i["\u0275\u0275elementStart"](26,"nb-card",12),i["\u0275\u0275elementStart"](27,"nb-card-header"),i["\u0275\u0275elementStart"](28,"h6",13),i["\u0275\u0275text"](29),i["\u0275\u0275pipe"](30,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](31,"nb-card-body"),i["\u0275\u0275elementStart"](32,"div",2),i["\u0275\u0275elementStart"](33,"div",3),i["\u0275\u0275elementStart"](34,"label",14),i["\u0275\u0275text"](35),i["\u0275\u0275pipe"](36,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](37,"label",15),i["\u0275\u0275text"](38,"*"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](39,"input",16,17),i["\u0275\u0275pipe"](41,"translate"),i["\u0275\u0275template"](42,O,3,4,"nb-alert",18),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](43,"div",2),i["\u0275\u0275elementStart"](44,"div",12),i["\u0275\u0275elementStart"](45,"label",19),i["\u0275\u0275text"](46,"Project Name"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](47,"label",20),i["\u0275\u0275text"](48,"*"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](49,"input",21),i["\u0275\u0275pipe"](50,"translate"),i["\u0275\u0275template"](51,M,3,4,"nb-alert",18),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](52,"div",12),i["\u0275\u0275elementStart"](53,"label",22),i["\u0275\u0275text"](54,"\u0627\u0633\u0645 \u0627\u0644\u0645\u0634\u0631\u0648\u0639"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](55,"label",23),i["\u0275\u0275text"](56,"*"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](57,"input",24),i["\u0275\u0275pipe"](58,"translate"),i["\u0275\u0275template"](59,q,3,4,"nb-alert",18),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](60,"div",2),i["\u0275\u0275elementStart"](61,"div",12),i["\u0275\u0275elementStart"](62,"label",25),i["\u0275\u0275text"](63),i["\u0275\u0275pipe"](64,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](65,"label",26),i["\u0275\u0275text"](66,"*"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](67,"nb-select",27),i["\u0275\u0275pipe"](68,"translate"),i["\u0275\u0275elementStart"](69,"nb-option",28),i["\u0275\u0275text"](70),i["\u0275\u0275pipe"](71,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](72,"nb-option",29),i["\u0275\u0275text"](73),i["\u0275\u0275pipe"](74,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](75,"nb-option",30),i["\u0275\u0275text"](76),i["\u0275\u0275pipe"](77,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](78,U,3,4,"nb-alert",18),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](79,"div",12),i["\u0275\u0275elementStart"](80,"label",31),i["\u0275\u0275text"](81),i["\u0275\u0275pipe"](82,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](83,"label",32),i["\u0275\u0275text"](84,"*"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](85,"nb-select",33),i["\u0275\u0275pipe"](86,"translate"),i["\u0275\u0275elementStart"](87,"nb-option",34),i["\u0275\u0275text"](88),i["\u0275\u0275pipe"](89,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](90,"nb-option",35),i["\u0275\u0275text"](91),i["\u0275\u0275pipe"](92,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](93,"nb-option",36),i["\u0275\u0275text"](94),i["\u0275\u0275pipe"](95,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](96,z,3,4,"nb-alert",18),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](97,"div",2),i["\u0275\u0275elementStart"](98,"div",12),i["\u0275\u0275elementStart"](99,"entity",37),i["\u0275\u0275listener"]("formValue",(function(e){return t.receiveProjectCategory(e)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](100,"div",12),i["\u0275\u0275elementStart"](101,"entity",37),i["\u0275\u0275listener"]("formValue",(function(e){return t.receiveProjectManager(e)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](102,"div",2),i["\u0275\u0275elementStart"](103,"div",12),i["\u0275\u0275elementStart"](104,"entity",37),i["\u0275\u0275listener"]("formValue",(function(e){return t.receiveProjectOwner(e)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](105,"div",12),i["\u0275\u0275elementStart"](106,"entity",37),i["\u0275\u0275listener"]("formValue",(function(e){return t.receiveContractor(e)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](107,"div",12),i["\u0275\u0275elementStart"](108,"nb-card"),i["\u0275\u0275elementStart"](109,"nb-card-header"),i["\u0275\u0275elementStart"](110,"h6",13),i["\u0275\u0275text"](111),i["\u0275\u0275pipe"](112,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](113,"nb-card-body"),i["\u0275\u0275elementStart"](114,"div",2),i["\u0275\u0275elementStart"](115,"div",38),i["\u0275\u0275elementStart"](116,"label",39),i["\u0275\u0275text"](117),i["\u0275\u0275pipe"](118,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](119,"label",40),i["\u0275\u0275text"](120,"*"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](121,"input",41),i["\u0275\u0275pipe"](122,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](123,"div",38),i["\u0275\u0275elementStart"](124,"label",42),i["\u0275\u0275text"](125),i["\u0275\u0275pipe"](126,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](127,"label",43),i["\u0275\u0275text"](128,"*"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](129,"input",44),i["\u0275\u0275pipe"](130,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](131,"div",38),i["\u0275\u0275elementStart"](132,"label",45),i["\u0275\u0275text"](133),i["\u0275\u0275pipe"](134,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](135,"label",46),i["\u0275\u0275text"](136,"*"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](137,"input",47),i["\u0275\u0275pipe"](138,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](139,"div",48),i["\u0275\u0275elementStart"](140,"agm-map",49),i["\u0275\u0275listener"]("mapClick",(function(e){return t.mapClicked(e)})),i["\u0275\u0275elementStart"](141,"agm-circle",50),i["\u0275\u0275listener"]("dragEnd",(function(e){return t.circleDragEnd(e)}))("radiusChange",(function(e){return t.circleRadiusChanged(e)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](142,Z,102,63,"div",51),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](143,ee,3,4,"nb-tab",52),i["\u0275\u0275template"](144,te,3,4,"nb-tab",52),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate"]("tabTitle",i["\u0275\u0275pipeBind1"](2,77,"Project")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("formGroup",t.forms),i["\u0275\u0275advance"](8),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](12,79,"project Control")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("status","info")("shape","round")("size","medium"),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](16,81,"viewAll")," "),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("status","danger")("shape","round")("disabled",!t.forms.valid||t.projectSaved)("size","medium"),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](20,83,"save")," "),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("status","warning")("shape","round")("disabled",!t.forms.valid)("size","medium"),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](24,85,"print")," "),i["\u0275\u0275advance"](6),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](30,87,"projectdata")),i["\u0275\u0275advance"](6),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](36,89,"code")),i["\u0275\u0275advance"](4),i["\u0275\u0275propertyInterpolate"]("placeholder",i["\u0275\u0275pipeBind1"](41,91,"code")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",t.forms.get("code").touched&&t.forms.get("code").invalid),i["\u0275\u0275advance"](7),i["\u0275\u0275propertyInterpolate"]("placeholder",i["\u0275\u0275pipeBind1"](50,93,"Project Name")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.forms.get("nameEn").touched&&t.forms.get("nameEn").invalid),i["\u0275\u0275advance"](6),i["\u0275\u0275propertyInterpolate"]("placeholder",i["\u0275\u0275pipeBind1"](58,95,"\u0627\u0633\u0645 \u0627\u0644\u0645\u0634\u0631\u0648\u0639")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.forms.get("nameAr").touched&&t.forms.get("nameAr").invalid),i["\u0275\u0275advance"](4),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](64,97,"projectStatus")),i["\u0275\u0275advance"](4),i["\u0275\u0275propertyInterpolate"]("placeholder",i["\u0275\u0275pipeBind1"](68,99,"projectStatus")),i["\u0275\u0275property"]("disabled",t.view),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](71,101,"active")),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](74,103,"stopped")),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](77,105,"ended")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.forms.get("projectStatus").touched&&t.forms.get("projectStatus").invalid),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](82,107,"workType")),i["\u0275\u0275advance"](4),i["\u0275\u0275propertyInterpolate"]("placeholder",i["\u0275\u0275pipeBind1"](86,109,"workType")),i["\u0275\u0275property"]("disabled",t.view),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](89,111,"design")),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](92,113,"Supervision")),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](95,115,"DesignAndSupervision ")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.forms.get("workType").touched&&t.forms.get("workType").invalid),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("disabled",t.view)("field",t.projectCategory)("form",t.forms)("isEditMode",t.isEditMode||t.view),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("disabled",t.view)("field",t.projectManager)("form",t.forms)("isEditMode",t.isEditMode||t.view),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("disabled",t.view)("field",t.projectOwner)("form",t.forms)("isEditMode",t.isEditMode),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("disabled",t.view)("field",t.contractor)("form",t.forms)("isEditMode",t.isEditMode),i["\u0275\u0275advance"](5),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](112,117,"projectLocation")),i["\u0275\u0275advance"](6),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](118,119,"latitude")),i["\u0275\u0275advance"](4),i["\u0275\u0275propertyInterpolate"]("placeholder",i["\u0275\u0275pipeBind1"](122,121,"latitude")),i["\u0275\u0275advance"](4),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](126,123,"longitude")),i["\u0275\u0275advance"](4),i["\u0275\u0275propertyInterpolate"]("placeholder",i["\u0275\u0275pipeBind1"](130,125,"longitude")),i["\u0275\u0275advance"](4),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](134,127,"Radius")),i["\u0275\u0275advance"](4),i["\u0275\u0275propertyInterpolate"]("placeholder",i["\u0275\u0275pipeBind1"](138,129,"Radius")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("latitude",t.radiusLat+1e-4)("longitude",t.radiusLng+1e-4)("zoom",t.zoom)("disableDefaultUI",!0)("zoomControl",!0),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("latitude",t.radiusLat)("longitude",t.radiusLng)("radius",t.forms.get("areaRadius").value)("fillColor","red")("fillOpacity",.5)("circleDraggable",!0)("editable",!0),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.projectSaved||t.isEditMode),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.projectSaved||t.isEditMode),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.projectSaved||t.isEditMode))},directives:[f.xb,f.wb,p.H,p.s,p.k,f.p,f.s,f.l,a.d,f.o,p.c,f.K,p.r,p.i,r.u,f.mb,f.bb,g.a,p.x,v.c,v.a,f.j,f.T,r.t,f.U,f.g,E,b.a,W,L],pipes:[d.d],styles:[".nb-theme-corporate   [_nghost-%COMP%]     agm-map, .nb-theme-cosmic   [_nghost-%COMP%]     agm-map, .nb-theme-dark   [_nghost-%COMP%]     agm-map, .nb-theme-default   [_nghost-%COMP%]     agm-map{width:100%;height:17rem}.listCard[_ngcontent-%COMP%]{padding:0!important}"]}),e})(),re=(()=>{class e{constructor(e,t,n){this.override=e,this.entity=t,this.router=n}canActivate(e,t){return!0}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](o.a),i["\u0275\u0275inject"](m.a),i["\u0275\u0275inject"](a.c))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const ae=[{path:"",component:l,children:[{path:"",component:c,canActivate:[re]},{path:"all",component:c,canActivate:[re]},{path:"control",component:ne,canActivate:[re]},{path:"edit/:entityId",component:ne,canActivate:[re]},{path:"view/:entityId",component:ne,canActivate:[re]}]}];let ie=(()=>{class e{}return e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[a.g.forChild(ae)],a.g]}),e})();var le=n("Tk/f"),oe=n("PAYq"),de=n("vTDv");n.d(t,"ProjectModule",(function(){return se}));let se=(()=>{class e{}return e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[r.c,ie,d.c,le.a,oe.a,f.t,f.L,f.ob,p.m,p.B,f.k,v.b,f.m,f.V,f.i,f.yb,f.Ob,f.J,de.a]]}),e})()}}]);