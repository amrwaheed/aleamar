function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{u4rF:function(e,t,n){"use strict";n.r(t);var r,a,i=n("ofXK"),l=n("tyNb"),o=n("fXoL"),d=((r=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||r)},r.\u0275cmp=o["\u0275\u0275defineComponent"]({type:r,selectors:[["ngx-project"]],decls:1,vars:0,template:function(e,t){1&e&&o["\u0275\u0275element"](0,"router-outlet")},directives:[l.h],styles:[""]}),r),c=n("uZM4"),s=n("sYmb"),p=n("944j"),m=((a=function(){function e(t,n,r){_classCallCheck(this,e),this.translate=t,this.override=n,this.datepipe=r,this.entityData={name:"project",all:{columnDefs:[{headerName:this.translate.instant("id"),field:"id",checkboxSelection:!0,filter:!0,sortable:!0,editable:!1},{headerName:this.translate.instant("name"),field:this.override.isRTL()?"nameAr":"nameEn",filter:!0,checkboxSelection:!1,sortable:!0,editable:!0},{headerName:this.translate.instant("workType"),field:"workType",filter:!0,checkboxSelection:!1,sortable:!0,editable:!1},{headerName:this.translate.instant("status"),field:"projectStatus",filter:!0,checkboxSelection:!1,sortable:!0,editable:!1}]},paginated:!0,paginatedOrientation:"desc",edit:!0,view:!0,add:!0,delete:!0,upload:!1}}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||a)(o["\u0275\u0275directiveInject"](s.e),o["\u0275\u0275directiveInject"](c.a),o["\u0275\u0275directiveInject"](i.f))},a.\u0275cmp=o["\u0275\u0275defineComponent"]({type:a,selectors:[["ngx-all-projects"]],decls:1,vars:1,consts:[[3,"entityData"]],template:function(e,t){1&e&&o["\u0275\u0275element"](0,"app-all-generic",0),2&e&&o["\u0275\u0275property"]("entityData",t.entityData)},directives:[p.a],styles:[""]}),a),u=n("3Pt+"),f=n("JuyU"),v=n("m01I"),g=n("Vaw3"),h=n("aceb"),b=n("EMTt"),S=n("pxUr"),E=n("SDzJ");function y(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"nb-list-item",13),o["\u0275\u0275elementStart"](1,"div",14),o["\u0275\u0275elementStart"](2,"file",15),o["\u0275\u0275listener"]("formValue",(function(e){o["\u0275\u0275restoreView"](n);var r=t.index;return o["\u0275\u0275nextContext"]().receiveFiles(e,r)})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"div",16),o["\u0275\u0275element"](4,"input",17),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"div",3),o["\u0275\u0275element"](7,"input",18),o["\u0275\u0275pipe"](8,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](9,"div",19),o["\u0275\u0275elementStart"](10,"div",20),o["\u0275\u0275elementStart"](11,"nb-action",21),o["\u0275\u0275listener"]("click",(function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().addProjectWorkStageFile()})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](12,"nb-action",22),o["\u0275\u0275listener"]("click",(function(){o["\u0275\u0275restoreView"](n);var e=t.index;return o["\u0275\u0275nextContext"]().removeProjectWorkStageFile(e)})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var r=t.$implicit,a=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("formGroup",r),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("field",a.fileField)("form",r)("isEditMode",a.isEditMode),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("placeholder",o["\u0275\u0275pipeBind1"](5,6,"File Name")),o["\u0275\u0275advance"](3),o["\u0275\u0275propertyInterpolate"]("placeholder",o["\u0275\u0275pipeBind1"](8,8,"File Type"))}}var j,x=((j=function(){function e(t,n,r,a,i,l,o,d){_classCallCheck(this,e),this.translate=t,this.override=n,this.entity=r,this.storage=a,this.route=i,this.router=l,this.fb=o,this.windowService=d,this.isEditMode=!1,this.fileField={name:"fileUrl",label:this.translate.instant("file Url"),required:!0,fromArray:!0}}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.workStageId=this.stage.controls.id.value,this.projectWorkStageFileForm=this.fb.array([]),this.projectWorkStageFileForm.length<1&&this.addProjectWorkStageFile(),this.workStageId&&(this.isEditMode=!0,this.entity.getAll(v.a.projectWorkStageFile.get+"?projectWorkStageId="+this.workStageId).then((function(t){t.subscribe((function(t){t.forEach((function(t){var n=e.fb.group({id:t.id,project:[t.project,[u.F.required,e.override.validateEntityId.bind(e)]],fileUrl:[t.fileUrl,[u.F.required]],fileName:[t.fileName,[u.F.required]],fileType:[t.fileType,[u.F.required]]});e.projectWorkStageFileForm.push(n)}));var n=e.projectWorkStageFileForm.controls.findIndex((function(e){return null==e.value.id}));e.projectWorkStageFileForm.length>1&&e.projectWorkStageFileForm.removeAt(n)}))})))}},{key:"receiveFiles",value:function(e,t){this.projectWorkStageFileForm.controls[t].get("fileUrl").setValue(e.fileUrl)}},{key:"addProjectWorkStageFile",value:function(){var e=this.fb.group({id:null,projectWorkStage:[{id:this.workStageId},[u.F.required,this.override.validateEntityId.bind(this)]],fileUrl:[null,[u.F.required]],fileName:[null,[u.F.required]],fileType:[null,[u.F.required]]});this.projectWorkStageFileForm.push(e)}},{key:"removeProjectWorkStageFile",value:function(e){var t=this;if(this.projectWorkStageFileForm.length>1){var n=this.projectWorkStageFileForm.controls[e].get("fileUrl").value;null!=n&&this.deleteFile(n);var r=this.projectWorkStageFileForm.controls[e].value;null!=r.id?this.entity.delete(v.a.projectWorkStageFile.delete,r,r.id).then((function(n){n.subscribe((function(n){t.entity.showSuccessToast(n.result),t.projectWorkStageFileForm.removeAt(e)}))})):this.projectWorkStageFileForm.removeAt(e)}}},{key:"deleteFile",value:function(e){this.storage.storage.refFromURL(e).delete()}},{key:"saveProjectFiles",value:function(){var e=this,t=this.projectWorkStageFileForm.value.filter((function(e){return null==e.id}));this.entity.save(v.a.projectWorkStageFile.post,t).then((function(t){t.subscribe((function(t){t&&(t=t).forEach((function(t){e.projectWorkStageFileForm.controls.find((function(e){return e.value.fileName==t.fileName})).get("id").setValue(t.id)}))}))}))}}]),e}()).\u0275fac=function(e){return new(e||j)(o["\u0275\u0275directiveInject"](s.e),o["\u0275\u0275directiveInject"](c.a),o["\u0275\u0275directiveInject"](f.a),o["\u0275\u0275directiveInject"](g.a),o["\u0275\u0275directiveInject"](l.a),o["\u0275\u0275directiveInject"](l.c),o["\u0275\u0275directiveInject"](u.f),o["\u0275\u0275directiveInject"](h.Vb))},j.\u0275cmp=o["\u0275\u0275defineComponent"]({type:j,selectors:[["workStageFiles"]],inputs:{stage:"stage"},decls:34,vars:22,consts:[[1,"row"],[1,"col-10"],[1,"text-danger"],[1,"col-2"],["nbButton","","fullWidth","","hero","",3,"status","shape","size","click"],[1,"col-6","text-center"],["for","projectStatus ",1,"label","text-primary"],["for","projectStatus",1,"label","text-danger"],[1,"col-3","text-center"],["for","projectStatus",1,"label","text-primary"],[1,"col-2","text-center"],[1,"col-1","text-center"],["class","row",3,"formGroup",4,"ngFor","ngForOf"],[1,"row",3,"formGroup"],[1,"col-6"],["id","entity",3,"field","form","isEditMode","formValue"],[1,"col-3"],["type","text","formControlName","fileName","id","fileName","name","fileName","nbInput","","fullWidth","","fieldSize","medium","shape","rounded",3,"placeholder"],["type","text","readonly","","formControlName","fileType","id","fileType","name","fileType","nbInput","","fullWidth","","fieldSize","medium","shape","rounded",3,"placeholder"],[1,"col-1"],[1,"row","pt-3"],["icon","plus",1,"col-6",3,"click"],["icon","trash",1,"col-6",3,"click"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"div",1),o["\u0275\u0275elementStart"](2,"h6",2),o["\u0275\u0275text"](3),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"div",3),o["\u0275\u0275elementStart"](6,"button",4),o["\u0275\u0275listener"]("click",(function(){return t.saveProjectFiles()})),o["\u0275\u0275text"](7),o["\u0275\u0275pipe"](8,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](9,"div",0),o["\u0275\u0275elementStart"](10,"div",5),o["\u0275\u0275elementStart"](11,"label",6),o["\u0275\u0275text"](12),o["\u0275\u0275pipe"](13,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](14,"label",7),o["\u0275\u0275text"](15,"*"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](16,"div",8),o["\u0275\u0275elementStart"](17,"label",9),o["\u0275\u0275text"](18),o["\u0275\u0275pipe"](19,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](20,"label",7),o["\u0275\u0275text"](21,"*"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](22,"div",10),o["\u0275\u0275elementStart"](23,"label",9),o["\u0275\u0275text"](24),o["\u0275\u0275pipe"](25,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](26,"label",7),o["\u0275\u0275text"](27,"*"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](28,"div",11),o["\u0275\u0275elementStart"](29,"label",9),o["\u0275\u0275text"](30),o["\u0275\u0275pipe"](31,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](32,"nb-list"),o["\u0275\u0275template"](33,y,13,10,"nb-list-item",12),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](4,10,"Files")),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("status","success")("shape","round")("size","small"),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](8,12,"save Files")," "),o["\u0275\u0275advance"](5),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](13,14,"File URL")),o["\u0275\u0275advance"](6),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](19,16,"File Name")),o["\u0275\u0275advance"](6),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](25,18,"File Type")),o["\u0275\u0275advance"](6),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](31,20,"Control")),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngForOf",t.projectWorkStageFileForm.controls))},directives:[h.l,h.T,i.t,h.U,u.s,u.k,E.a,u.c,h.K,u.r,u.i,h.g],pipes:[s.d],styles:[""]}),j);function F(e,t){if(1&e&&o["\u0275\u0275element"](0,"nb-tree-grid-row-toggle",2),2&e){var n=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("expanded",n.expanded)}}function k(e,t){1&e&&o["\u0275\u0275element"](0,"nb-icon",3)}var C,w=((C=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"isDir",value:function(){return"dir"===this.kind}}]),e}()).\u0275fac=function(e){return new(e||C)},C.\u0275cmp=o["\u0275\u0275defineComponent"]({type:C,selectors:[["fs-icon"]],inputs:{kind:"kind",expanded:"expanded"},decls:3,vars:2,consts:[[3,"expanded",4,"ngIf","ngIfElse"],["fileIcon",""],[3,"expanded"],["icon","file-text-outline"]],template:function(e,t){if(1&e&&(o["\u0275\u0275template"](0,F,1,1,"nb-tree-grid-row-toggle",0),o["\u0275\u0275template"](1,k,1,0,"ng-template",null,1,o["\u0275\u0275templateRefExtractor"])),2&e){var n=o["\u0275\u0275reference"](2);o["\u0275\u0275property"]("ngIf",t.isDir())("ngIfElse",n)}},directives:[i.u,h.Rb,h.H],styles:[""]}),C);function I(e,t){1&e&&o["\u0275\u0275element"](0,"tr",9)}function T(e,t){1&e&&o["\u0275\u0275element"](0,"tr",10)}function V(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"th",11),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("nbSortHeader",n.getSortDirection(n.customColumn)),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](2,2,n.customColumn)," ")}}function W(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"td",12),o["\u0275\u0275element"](1,"fs-icon",13),o["\u0275\u0275text"](2),o["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,r=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("kind",n.data.kind)("expanded",n.expanded),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",n.data[r.customColumn]," ")}}function B(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"th",11),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]().$implicit,r=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("nbSortHeader",r.getSortDirection(n)),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](2,2,n)," ")}}function P(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"td",12),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,r=o["\u0275\u0275nextContext"]().$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](n.data[r]||"-")}}function N(e,t){if(1&e&&(o["\u0275\u0275elementContainerStart"](0,14),o["\u0275\u0275template"](1,B,3,4,"th",6),o["\u0275\u0275template"](2,P,2,1,"td",7),o["\u0275\u0275elementContainerEnd"]()),2&e){var n=t.$implicit,r=t.index,a=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("nbTreeGridColumnDef",n)("showOn",a.getShowOn(r))}}var A,D=((A=function(){function e(t,n,r,a){_classCallCheck(this,e),this.dataSourceBuilder=t,this.entity=n,this.dp=r,this.override=a,this.data=[],this.customColumn="user",this.defaultColumns=["date","attendanceDate","leavingDate"],this.allColumns=[this.customColumn].concat(_toConsumableArray(this.defaultColumns)),this.sortDirection=h.sb.DESCENDING}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.entity.getData(v.a.projectAttendance.get+"?projectId="+this.projectId).then((function(t){t.subscribe((function(t){e.attendances=t;var n=[],r=e.attendances.reduce((function(e,t){return(e[t.user.fullName]=e[t.user.fullName]||[]).push(t),e}),{});for(var a in r)r.hasOwnProperty(a)&&n.push(_defineProperty({},"".concat(a),r[a]));n.forEach((function(t){var n=Object.keys(t)[0],r={data:{user:n,date:null,attendanceDate:null,leavingDate:null},children:[]};t[n].forEach((function(t){var a={data:{user:n,date:e.dp.transform(t.date,"dd/MM/yyyy"),attendanceDate:e.dp.transform(t.attendanceDate,"hh:mm:ss"),leavingDate:e.dp.transform(t.leavingDate,"hh:mm:ss")}};r.children.push(a)})),e.data.push(r)})),e.dataSource=e.dataSourceBuilder.create(e.data)}))}))}},{key:"updateSort",value:function(e){this.sortColumn=e.column,this.sortDirection=e.direction}},{key:"getSortDirection",value:function(e){return this.sortColumn===e?this.sortDirection:h.sb.NONE}},{key:"getShowOn",value:function(e){return 400+100*e}}]),e}()).\u0275fac=function(e){return new(e||A)(o["\u0275\u0275directiveInject"](h.Jb),o["\u0275\u0275directiveInject"](f.a),o["\u0275\u0275directiveInject"](i.f),o["\u0275\u0275directiveInject"](c.a))},A.\u0275cmp=o["\u0275\u0275defineComponent"]({type:A,selectors:[["attendance"]],inputs:{projectId:"projectId"},decls:12,vars:7,consts:[["for","search",1,"search-label"],["nbInput","","fullWidth","","id","search",1,"search-input",3,"nbFilterInput"],[3,"nbTreeGrid","nbSort","sort"],["nbTreeGridHeaderRow","",4,"nbTreeGridHeaderRowDef"],["nbTreeGridRow","",4,"nbTreeGridRowDef","nbTreeGridRowDefColumns"],[3,"nbTreeGridColumnDef"],["nbTreeGridHeaderCell","",3,"nbSortHeader",4,"nbTreeGridHeaderCellDef"],["nbTreeGridCell","",4,"nbTreeGridCellDef"],[3,"nbTreeGridColumnDef","showOn",4,"ngFor","ngForOf"],["nbTreeGridHeaderRow",""],["nbTreeGridRow",""],["nbTreeGridHeaderCell","",3,"nbSortHeader"],["nbTreeGridCell",""],[3,"kind","expanded"],[3,"nbTreeGridColumnDef","showOn"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"nb-card"),o["\u0275\u0275elementStart"](1,"nb-card-body"),o["\u0275\u0275elementStart"](2,"label",0),o["\u0275\u0275text"](3,"Search:"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](4,"input",1),o["\u0275\u0275elementStart"](5,"table",2),o["\u0275\u0275listener"]("sort",(function(e){return t.updateSort(e)})),o["\u0275\u0275template"](6,I,1,0,"tr",3),o["\u0275\u0275template"](7,T,1,0,"tr",4),o["\u0275\u0275elementContainerStart"](8,5),o["\u0275\u0275template"](9,V,3,4,"th",6),o["\u0275\u0275template"](10,W,3,3,"td",7),o["\u0275\u0275elementContainerEnd"](),o["\u0275\u0275template"](11,N,3,2,"ng-container",8),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("nbFilterInput",t.dataSource),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("nbTreeGrid",t.dataSource)("nbSort",t.dataSource),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("nbTreeGridHeaderRowDef",t.allColumns),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("nbTreeGridRowDefColumns",t.allColumns),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("nbTreeGridColumnDef",t.customColumn),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngForOf",t.defaultColumns))},directives:[h.p,h.o,h.K,h.E,h.Ib,h.tb,h.Nb,h.Qb,h.Hb,h.Kb,h.Fb,i.t,h.Mb,h.Pb,h.Lb,h.ub,h.Gb,w],pipes:[s.d],styles:[""]}),A);function O(e,t){1&e&&o["\u0275\u0275element"](0,"tr",9)}function R(e,t){1&e&&o["\u0275\u0275element"](0,"tr",10)}function G(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"th",11),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("nbSortHeader",n.getSortDirection(n.customColumn)),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](2,2,n.customColumn)," ")}}function L(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"td",12),o["\u0275\u0275element"](1,"fs-icon",13),o["\u0275\u0275text"](2),o["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,r=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("kind",n.data.kind)("expanded",n.expanded),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",n.data[r.customColumn]," ")}}function M(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"th",11),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]().$implicit,r=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("nbSortHeader",r.getSortDirection(n)),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](2,2,n)," ")}}function q(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"td",12),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,r=o["\u0275\u0275nextContext"]().$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](n.data[r]||"-")}}function U(e,t){if(1&e&&(o["\u0275\u0275elementContainerStart"](0,14),o["\u0275\u0275template"](1,M,3,4,"th",6),o["\u0275\u0275template"](2,q,2,1,"td",7),o["\u0275\u0275elementContainerEnd"]()),2&e){var n=t.$implicit,r=t.index,a=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("nbTreeGridColumnDef",n)("showOn",a.getShowOn(r))}}var _,z=((_=function(){function e(t,n,r,a){_classCallCheck(this,e),this.dataSourceBuilder=t,this.entity=n,this.dp=r,this.override=a,this.data=[],this.customColumn="ratedUser",this.defaultColumns=["evaluator","value","comment"],this.allColumns=[this.customColumn].concat(_toConsumableArray(this.defaultColumns)),this.sortDirection=h.sb.DESCENDING}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.entity.getData(v.a.userRating.get+"?projectId="+this.projectId).then((function(t){t.subscribe((function(t){var n=[],r=t.reduce((function(e,t){return(e[t.ratedUser.fullName]=e[t.ratedUser.fullName]||[]).push(t),e}),{});for(var a in r)r.hasOwnProperty(a)&&n.push(_defineProperty({},"".concat(a),r[a]));n.forEach((function(t){var n=Object.keys(t)[0],r={data:{ratedUser:n,evaluator:null,value:null,comment:null},children:[]};t[n].forEach((function(e){r.children.push({data:{ratedUser:n,evaluator:e.evaluator.fullName,value:e.value,comment:e.comment}})})),e.data.push(r)})),e.dataSource=e.dataSourceBuilder.create(e.data)}))}))}},{key:"updateSort",value:function(e){this.sortColumn=e.column,this.sortDirection=e.direction}},{key:"getSortDirection",value:function(e){return this.sortColumn===e?this.sortDirection:h.sb.NONE}},{key:"getShowOn",value:function(e){return 400+100*e}}]),e}()).\u0275fac=function(e){return new(e||_)(o["\u0275\u0275directiveInject"](h.Jb),o["\u0275\u0275directiveInject"](f.a),o["\u0275\u0275directiveInject"](i.f),o["\u0275\u0275directiveInject"](c.a))},_.\u0275cmp=o["\u0275\u0275defineComponent"]({type:_,selectors:[["userRatings"]],inputs:{projectId:"projectId"},decls:12,vars:7,consts:[["for","search",1,"search-label"],["nbInput","","fullWidth","","id","search",1,"search-input",3,"nbFilterInput"],[3,"nbTreeGrid","nbSort","sort"],["nbTreeGridHeaderRow","",4,"nbTreeGridHeaderRowDef"],["nbTreeGridRow","",4,"nbTreeGridRowDef","nbTreeGridRowDefColumns"],[3,"nbTreeGridColumnDef"],["nbTreeGridHeaderCell","",3,"nbSortHeader",4,"nbTreeGridHeaderCellDef"],["nbTreeGridCell","",4,"nbTreeGridCellDef"],[3,"nbTreeGridColumnDef","showOn",4,"ngFor","ngForOf"],["nbTreeGridHeaderRow",""],["nbTreeGridRow",""],["nbTreeGridHeaderCell","",3,"nbSortHeader"],["nbTreeGridCell",""],[3,"kind","expanded"],[3,"nbTreeGridColumnDef","showOn"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"nb-card"),o["\u0275\u0275elementStart"](1,"nb-card-body"),o["\u0275\u0275elementStart"](2,"label",0),o["\u0275\u0275text"](3,"Search:"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](4,"input",1),o["\u0275\u0275elementStart"](5,"table",2),o["\u0275\u0275listener"]("sort",(function(e){return t.updateSort(e)})),o["\u0275\u0275template"](6,O,1,0,"tr",3),o["\u0275\u0275template"](7,R,1,0,"tr",4),o["\u0275\u0275elementContainerStart"](8,5),o["\u0275\u0275template"](9,G,3,4,"th",6),o["\u0275\u0275template"](10,L,3,3,"td",7),o["\u0275\u0275elementContainerEnd"](),o["\u0275\u0275template"](11,U,3,2,"ng-container",8),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("nbFilterInput",t.dataSource),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("nbTreeGrid",t.dataSource)("nbSort",t.dataSource),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("nbTreeGridHeaderRowDef",t.allColumns),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("nbTreeGridRowDefColumns",t.allColumns),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("nbTreeGridColumnDef",t.customColumn),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngForOf",t.defaultColumns))},directives:[h.p,h.o,h.K,h.E,h.Ib,h.tb,h.Nb,h.Qb,h.Hb,h.Kb,h.Fb,i.t,h.Mb,h.Pb,h.Lb,h.ub,h.Gb,w],pipes:[s.d],styles:[""]}),_);function H(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"nb-alert",53),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate2"]("","code"," ",o["\u0275\u0275pipeBind1"](2,2,"is Invalid"),""))}function J(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"nb-alert",53),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate2"]("","nameEn"," ",o["\u0275\u0275pipeBind1"](2,2,"is Invalid"),""))}function K(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"nb-alert",53),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate2"]("","nameAr"," ",o["\u0275\u0275pipeBind1"](2,2,"is Invalid"),""))}function Q(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"nb-alert",53),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate2"]("","projectStatus"," ",o["\u0275\u0275pipeBind1"](2,2,"is Invalid"),""))}function X(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"nb-alert",53),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate2"]("","workType"," ",o["\u0275\u0275pipeBind1"](2,2,"is Invalid"),""))}function Y(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",76),o["\u0275\u0275elementStart"](1,"div",77),o["\u0275\u0275elementStart"](2,"nb-action",78),o["\u0275\u0275listener"]("click",(function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](3).addEngineer()})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"nb-action",79),o["\u0275\u0275listener"]("click",(function(){o["\u0275\u0275restoreView"](n);var e=o["\u0275\u0275nextContext"]().index;return o["\u0275\u0275nextContext"](2).removeEngineerRow(e)})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}}function Z(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"nb-list-item",74),o["\u0275\u0275elementStart"](1,"div"),o["\u0275\u0275elementStart"](2,"entity",37),o["\u0275\u0275listener"]("formValue",(function(e){o["\u0275\u0275restoreView"](n);var r=t.index;return o["\u0275\u0275nextContext"](2).receiveProjectEngineer(e,r)})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](3,Y,4,0,"div",75),o["\u0275\u0275elementEnd"]()}if(2&e){var r=t.$implicit,a=o["\u0275\u0275nextContext"](2);o["\u0275\u0275property"]("formGroup",r),o["\u0275\u0275advance"](1),o["\u0275\u0275attribute"]("class",a.view?"col-md-11":"col-md-9"),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("disabled",a.view)("field",a.projectEngineer)("form",r)("isEditMode",a.isEditMode),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!a.view)}}function ee(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",76),o["\u0275\u0275elementStart"](1,"div",77),o["\u0275\u0275elementStart"](2,"nb-action",78),o["\u0275\u0275listener"]("click",(function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](3).addProjectWorkStage()})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"nb-action",79),o["\u0275\u0275listener"]("click",(function(){o["\u0275\u0275restoreView"](n);var e=o["\u0275\u0275nextContext"]().index;return o["\u0275\u0275nextContext"](2).removProjectWorkStage(e)})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}}function te(e,t){if(1&e&&o["\u0275\u0275element"](0,"workStageFiles",84),2&e){var n=o["\u0275\u0275nextContext"]().$implicit;o["\u0275\u0275property"]("stage",n)}}function ne(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"nb-list-item",74),o["\u0275\u0275elementStart"](1,"div",38),o["\u0275\u0275elementStart"](2,"entity",37),o["\u0275\u0275listener"]("formValue",(function(e){o["\u0275\u0275restoreView"](n);var r=t.index;return o["\u0275\u0275nextContext"](2).receiveWorkStage(e,r)})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"div",80),o["\u0275\u0275element"](4,"input",81),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"div"),o["\u0275\u0275elementStart"](7,"button",82),o["\u0275\u0275listener"]("click",(function(){o["\u0275\u0275restoreView"](n);var e=o["\u0275\u0275reference"](12);return o["\u0275\u0275nextContext"](2).showWorkStageFiles(e)})),o["\u0275\u0275text"](8),o["\u0275\u0275pipe"](9,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](10,ee,4,0,"div",75),o["\u0275\u0275template"](11,te,1,1,"ng-template",null,83,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275elementEnd"]()}if(2&e){var r=t.$implicit,a=o["\u0275\u0275nextContext"](2);o["\u0275\u0275property"]("formGroup",r),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("disabled",a.view)("field",a.workStage)("form",r)("isEditMode",a.isEditMode),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("placeholder",o["\u0275\u0275pipeBind1"](5,15,"completion Rate")),o["\u0275\u0275advance"](2),o["\u0275\u0275attribute"]("class",a.view?"col-md-5":"col-md-3"),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("status","warning")("id",r.get("id"))("disabled",!a.projectWorkStagesForm.valid)("shape","rectangle")("size","small")("disabled",null==r.get("id")),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](9,17,"Files")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",!a.view)}}function re(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",90),o["\u0275\u0275elementStart"](1,"div",77),o["\u0275\u0275elementStart"](2,"nb-action",91),o["\u0275\u0275listener"]("click",(function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](3).addProjectFile()})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"nb-action",92),o["\u0275\u0275listener"]("click",(function(){o["\u0275\u0275restoreView"](n);var e=o["\u0275\u0275nextContext"]().index;return o["\u0275\u0275nextContext"](2).removeProjectFile(e)})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}}function ae(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"nb-list-item",74),o["\u0275\u0275elementStart"](1,"div",85),o["\u0275\u0275elementStart"](2,"file",37),o["\u0275\u0275listener"]("formValue",(function(e){o["\u0275\u0275restoreView"](n);var r=t.index;return o["\u0275\u0275nextContext"](2).receiveFiles(e,r)})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"div",86),o["\u0275\u0275element"](4,"input",87),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"div"),o["\u0275\u0275element"](7,"input",88),o["\u0275\u0275pipe"](8,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](9,re,4,0,"div",89),o["\u0275\u0275elementEnd"]()}if(2&e){var r=t.$implicit,a=o["\u0275\u0275nextContext"](2);o["\u0275\u0275property"]("formGroup",r),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("disabled",a.view)("field",a.fileField)("form",r)("isEditMode",a.isEditMode),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("placeholder",o["\u0275\u0275pipeBind1"](5,9,"FileName")),o["\u0275\u0275advance"](2),o["\u0275\u0275attribute"]("class",a.view?"col-3":"col-2"),o["\u0275\u0275advance"](1),o["\u0275\u0275propertyInterpolate"]("placeholder",o["\u0275\u0275pipeBind1"](8,11,"FileType")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",!a.view)}}function ie(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",54),o["\u0275\u0275elementStart"](1,"div",2),o["\u0275\u0275elementStart"](2,"div",55),o["\u0275\u0275elementStart"](3,"nb-card"),o["\u0275\u0275elementStart"](4,"nb-card-header"),o["\u0275\u0275elementStart"](5,"div",2),o["\u0275\u0275elementStart"](6,"div",56),o["\u0275\u0275elementStart"](7,"h6",13),o["\u0275\u0275text"](8),o["\u0275\u0275pipe"](9,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](10,"div",57),o["\u0275\u0275elementStart"](11,"button",58),o["\u0275\u0275listener"]("click",(function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().saveEngineers()})),o["\u0275\u0275text"](12),o["\u0275\u0275pipe"](13,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](14,"nb-card-body",59),o["\u0275\u0275elementStart"](15,"div",2),o["\u0275\u0275elementStart"](16,"div",60),o["\u0275\u0275elementStart"](17,"label",25),o["\u0275\u0275text"](18),o["\u0275\u0275pipe"](19,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](20,"label",26),o["\u0275\u0275text"](21,"*"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](22,"div",61),o["\u0275\u0275elementStart"](23,"label",25),o["\u0275\u0275text"](24),o["\u0275\u0275pipe"](25,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](26,"nb-list"),o["\u0275\u0275template"](27,Z,4,7,"nb-list-item",62),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](28,"div",63),o["\u0275\u0275elementStart"](29,"nb-card"),o["\u0275\u0275elementStart"](30,"nb-card-header"),o["\u0275\u0275elementStart"](31,"div",2),o["\u0275\u0275elementStart"](32,"div",56),o["\u0275\u0275elementStart"](33,"h6",13),o["\u0275\u0275text"](34),o["\u0275\u0275pipe"](35,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](36,"div",57),o["\u0275\u0275elementStart"](37,"button",58),o["\u0275\u0275listener"]("click",(function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().saveWorkStages()})),o["\u0275\u0275text"](38),o["\u0275\u0275pipe"](39,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](40,"nb-card-body",59),o["\u0275\u0275elementStart"](41,"div",2),o["\u0275\u0275elementStart"](42,"div",64),o["\u0275\u0275elementStart"](43,"label",65),o["\u0275\u0275text"](44),o["\u0275\u0275pipe"](45,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](46,"label",26),o["\u0275\u0275text"](47,"*"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](48,"div",66),o["\u0275\u0275elementStart"](49,"label",25),o["\u0275\u0275text"](50),o["\u0275\u0275pipe"](51,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](52,"label",26),o["\u0275\u0275text"](53,"*"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](54,"div",61),o["\u0275\u0275elementStart"](55,"label",67),o["\u0275\u0275text"](56),o["\u0275\u0275pipe"](57,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](58,"div",61),o["\u0275\u0275elementStart"](59,"label",25),o["\u0275\u0275text"](60),o["\u0275\u0275pipe"](61,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](62,"nb-list"),o["\u0275\u0275template"](63,ne,13,19,"nb-list-item",62),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](64,"div",3),o["\u0275\u0275elementStart"](65,"nb-card"),o["\u0275\u0275elementStart"](66,"nb-card-header"),o["\u0275\u0275elementStart"](67,"div",2),o["\u0275\u0275elementStart"](68,"div",68),o["\u0275\u0275elementStart"](69,"h6",13),o["\u0275\u0275text"](70),o["\u0275\u0275pipe"](71,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](72,"div",69),o["\u0275\u0275elementStart"](73,"button",58),o["\u0275\u0275listener"]("click",(function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().saveProjectFiles()})),o["\u0275\u0275text"](74),o["\u0275\u0275pipe"](75,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](76,"nb-card-body",59),o["\u0275\u0275elementStart"](77,"div",2),o["\u0275\u0275elementStart"](78,"div",70),o["\u0275\u0275elementStart"](79,"label",65),o["\u0275\u0275text"](80),o["\u0275\u0275pipe"](81,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](82,"label",26),o["\u0275\u0275text"](83,"*"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](84,"div",71),o["\u0275\u0275elementStart"](85,"label",25),o["\u0275\u0275text"](86),o["\u0275\u0275pipe"](87,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](88,"label",26),o["\u0275\u0275text"](89,"*"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](90,"div",72),o["\u0275\u0275elementStart"](91,"label",25),o["\u0275\u0275text"](92),o["\u0275\u0275pipe"](93,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](94,"label",26),o["\u0275\u0275text"](95,"*"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](96,"div",73),o["\u0275\u0275elementStart"](97,"label",25),o["\u0275\u0275text"](98),o["\u0275\u0275pipe"](99,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](100,"nb-list"),o["\u0275\u0275template"](101,ae,10,13,"nb-list-item",62),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var r=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](8),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](9,31,"Engineers")),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("status","success")("disabled",!r.projectEngineersForm.valid||r.view)("shape","round")("size","small"),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](13,33,"saveengineers")," "),o["\u0275\u0275advance"](6),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](19,35,"SelectEngineer")),o["\u0275\u0275advance"](6),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](25,37,"Control")),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngForOf",r.projectEngineersForm.controls),o["\u0275\u0275advance"](7),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](35,39,"workStage")),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("status","success")("disabled",!r.projectWorkStagesForm.valid||r.view)("shape","round")("size","small"),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](39,41,"savestages")," "),o["\u0275\u0275advance"](6),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](45,43,"SelectStage")),o["\u0275\u0275advance"](6),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](51,45,"completionRate")),o["\u0275\u0275advance"](6),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](57,47,"Files")),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](61,49,"Control")),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngForOf",r.projectWorkStagesForm.controls),o["\u0275\u0275advance"](7),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](71,51,"Files")),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("status","success")("disabled",!r.projectFilesForm.valid)("shape","round")("size","small"),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](75,53,"saveFiles")," "),o["\u0275\u0275advance"](6),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](81,55,"FileURL")),o["\u0275\u0275advance"](6),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](87,57,"FileName")),o["\u0275\u0275advance"](6),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](93,59,"FileType")),o["\u0275\u0275advance"](6),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](99,61,"Control")),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngForOf",r.projectFilesForm.controls)}}function le(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"nb-tab",93),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275element"](2,"attendance",94),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]();o["\u0275\u0275propertyInterpolate"]("tabTitle",o["\u0275\u0275pipeBind1"](1,2,"Attendances")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("projectId",n.entityId)}}function oe(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"nb-tab",93),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275element"](2,"userRatings",94),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]();o["\u0275\u0275propertyInterpolate"]("tabTitle",o["\u0275\u0275pipeBind1"](1,2,"User Ratings")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("projectId",n.entityId)}}var de,ce,se,pe=((ce=function(){function e(t,n,r,a,i,l,o,d){_classCallCheck(this,e),this.translate=t,this.override=n,this.entity=r,this.storage=a,this.route=i,this.router=l,this.fb=o,this.windowService=d,this.isEditMode=!1,this.project={id:null,code:null,nameAr:null,nameEn:null,projectStatus:null,workType:null,locationLat:null,locationLng:null,areaRadius:null,projectCategory:{id:null},projectManager:{id:null},projectOwner:{id:null},contractor:{id:null},projectEngineers:[],projectWorkStages:[],projectFiles:[]},this.view=!1,this.projectCategory={name:"projectCategory",from:"projectCategory",label:this.translate.instant("projectCategory"),required:!0,isEntity:!0,fromArray:!1,optionName:this.override.isRTL()?"nameAr":"nameEn",disabled:!1,exludeView:["iconUrl","imageUrl"]},this.projectManager={name:"projectManager",from:"User",label:this.translate.instant("projectManager"),required:!0,isEntity:!0,fromArray:!1,optionName:"fullName",disabled:!1,pathParams:[{key:"userType",value:"manager"}],exludeView:["fcmToken","imageUrl","customPermessionGroup","createdAt","userType"]},this.projectOwner={name:"projectOwner",from:"User",label:this.translate.instant("projectOwner"),required:!0,isEntity:!0,fromArray:!1,optionName:"fullName",disabled:!1,pathParams:[{key:"userType",value:"client"}],exludeView:["fcmToken","imageUrl","customPermessionGroup","createdAt","userType"]},this.contractor={name:"contractor",from:"User",label:this.translate.instant("contractor"),required:!0,isEntity:!0,fromArray:!1,optionName:"fullName",disabled:!1,pathParams:[{key:"userType",value:"contractor"}],exludeView:["fcmToken","imageUrl","customPermessionGroup","createdAt","userType"]},this.zoom=15,this.radiusLat=29.9968975,this.radiusLng=31.3207497,this.marker={lat:29.9968975,lng:31.3207497,label:this.project.nameEn,draggable:!0},this.projectEngineer={name:"engineer",from:"User",label:this.translate.instant("projectManager"),required:!0,isEntity:!0,fromArray:!0,optionName:"fullName",disabled:!1,pathParams:[{key:"userType",value:"engineer"}],exludeView:["fcmToken","imageUrl","customPermessionGroup","createdAt","userType"]},this.workStage={name:"workStage",from:"workStage",label:this.translate.instant("workStage"),required:!0,isEntity:!0,fromArray:!0,optionName:this.override.isRTL()?"nameAr":"nameEn",disabled:!1,exludeView:["createdAt","updatedAt"]},this.fileField={name:"fileUrl",label:this.translate.instant("file Url"),required:!0,fromArray:!0}}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.forms=this.fb.group({id:null,code:[null,[u.F.required,u.F.minLength(3)]],nameAr:[null,[u.F.required,u.F.minLength(3)]],nameEn:[null,[u.F.required,u.F.minLength(3)]],projectStatus:[null,[u.F.required]],workType:[null,[u.F.required]],locationLat:[29.9968975,[u.F.min(0)]],locationLng:[31.3207497,[u.F.min(0)]],areaRadius:[20,[u.F.min(20)]],projectCategory:[null,[u.F.required,this.override.validateEntityId.bind(this)]],projectManager:[null,[u.F.required]],projectOwner:[null,[u.F.required]],contractor:[null,[u.F.required]]}),this.projectEngineersForm=this.fb.array([]),this.projectWorkStagesForm=this.fb.array([]),this.projectFilesForm=this.fb.array([]),this.projectEngineersForm.length<1&&this.addEngineer(),this.projectWorkStagesForm.length<1&&this.addProjectWorkStage(),this.projectFilesForm.length<1&&this.addProjectFile(),this.entityId=this.route.snapshot.paramMap.get("entityId"),console.log(this.entityId),this.entityId&&(this.route.snapshot.routeConfig.path.startsWith("view")&&(this.view=!0),this.isEditMode=!0,this.entity.getOne(v.a.project.getOne,this.entityId).then((function(t){t.subscribe((function(t){e.radiusLat=t.locationLat,e.radiusLng=t.locationLng,e.forms.get("id").setValue(t.id),e.forms.get("code").setValue(t.code),e.forms.get("nameAr").setValue(t.nameAr),e.forms.get("nameEn").setValue(t.nameEn),e.forms.get("projectStatus").setValue(t.projectStatus),e.forms.get("workType").setValue(t.workType),e.forms.get("areaRadius").setValue(t.areaRadius),e.forms.get("locationLat").setValue(t.locationLat),e.forms.get("locationLng").setValue(t.locationLng),e.forms.get("projectCategory").setValue(t.projectCategory),e.forms.get("projectOwner").setValue(t.projectOwner),e.forms.get("projectManager").setValue(t.projectManager),e.forms.get("contractor").setValue(t.contractor),e.projectEngineersForm.controls[0].get("project").setValue({id:t.id}),e.projectWorkStagesForm.controls[0].get("project").setValue({id:t.id}),e.projectFilesForm.controls[0].get("project").setValue({id:t.id}),t.projectEngineers.forEach((function(t){var n=e.fb.group({id:t.id,engineer:[t.engineer,[u.F.required,e.override.validateEntityId.bind(e)]],project:[t.project,[u.F.required,e.override.validateEntityId.bind(e)]]});e.projectEngineersForm.push(n)}));var n=e.projectEngineersForm.controls.findIndex((function(e){return null==e.value.id}));e.projectEngineersForm.length>1&&e.projectEngineersForm.removeAt(n),t.projectWorkStages.forEach((function(t){var n=e.fb.group({id:t.id,workStage:[t.workStage,[u.F.required,e.override.validateEntityId.bind(e)]],project:[t.project,[u.F.required,e.override.validateEntityId.bind(e)]],completionRate:[t.completionRate,[u.F.required,u.F.min(0),u.F.max(100)]]});e.projectWorkStagesForm.push(n)})),n=e.projectWorkStagesForm.controls.findIndex((function(e){return null==e.value.id})),e.projectWorkStagesForm.length>1&&e.projectWorkStagesForm.removeAt(n),t.projectFiles.forEach((function(t){var n=e.fb.group({id:t.id,project:[t.project,[u.F.required,e.override.validateEntityId.bind(e)]],fileUrl:[t.fileUrl,[u.F.required]],fileName:[t.fileName,[u.F.required]],fileType:[t.fileType,[u.F.required]]});e.projectFilesForm.push(n)})),n=e.projectFilesForm.controls.findIndex((function(e){return null==e.value.id})),e.projectFilesForm.length>1&&e.projectFilesForm.removeAt(n)}))})))}},{key:"receiveProjectCategory",value:function(e){this.forms.get("projectCategory").setValue(e.projectCategory)}},{key:"receiveProjectManager",value:function(e){this.forms.get("projectManager").setValue(e.projectManager)}},{key:"receiveProjectOwner",value:function(e){this.forms.get("projectOwner").setValue(e.projectOwner)}},{key:"receiveContractor",value:function(e){this.forms.get("contractor").setValue(e.contractor)}},{key:"circleDragEnd",value:function(e){var t=e.coords.lat,n=e.coords.lng;this.forms.get("locationLat").setValue(t),this.forms.get("locationLng").setValue(n)}},{key:"circleRadiusChanged",value:function(e){this.forms.get("areaRadius").setValue(e)}},{key:"mapClicked",value:function(e){this.marker={lat:e.coords.lat,lng:e.coords.lng,draggable:!0},this.forms.get("locationLat").setValue(this.marker.lat),this.forms.get("locationLng").setValue(this.marker.lng)}},{key:"print",value:function(){window.print()}},{key:"onSubmit",value:function(){var e=this,t=this.forms.value;t.locationLat=this.forms.get("locationLat").value,t.locationLng=this.forms.get("locationLng").value,t.areaRadius=this.forms.get("areaRadius").value,this.isEditMode?this.entity.update(v.a.project.put,t,this.entityId).then((function(t){t.subscribe((function(t){e.forms.get("id").setValue(t.id),e.forms.get("code").setValue(t.code),e.forms.get("nameAr").setValue(t.nameAr),e.forms.get("nameEn").setValue(t.nameEn),e.forms.get("projectStatus").setValue(t.projectStatus),e.forms.get("workType").setValue(t.workType),e.forms.get("areaRadius").setValue(t.areaRadius),e.forms.get("locationLat").setValue(t.locationLat),e.forms.get("locationLng").setValue(t.locationLng),e.forms.get("projectCategory").setValue(t.projectCategory),e.forms.get("projectOwner").setValue(t.projectOwner),e.forms.get("projectManager").setValue(t.projectManager),e.forms.get("contractor").setValue(t.contractor),e.projectSaved=!0,e.scrollToSection("projectAdditionalData"),e.projectEngineersForm.controls[0].get("project").setValue({id:t.id}),e.projectWorkStagesForm.controls[0].get("project").setValue({id:t.id}),e.projectFilesForm.controls[0].get("project").setValue({id:t.id})}))})):this.entity.save(v.a.project.post,t).then((function(t){t.subscribe((function(t){e.forms.get("id").setValue(t.id),e.entityId=t.id,e.forms.get("code").setValue(t.code),e.forms.get("nameAr").setValue(t.nameAr),e.forms.get("nameEn").setValue(t.nameEn),e.forms.get("projectStatus").setValue(t.projectStatus),e.forms.get("workType").setValue(t.workType),e.forms.get("areaRadius").setValue(t.areaRadius),e.forms.get("locationLat").setValue(t.locationLat),e.forms.get("locationLng").setValue(t.locationLng),e.forms.get("projectCategory").setValue(t.projectCategory),e.forms.get("projectOwner").setValue(t.projectOwner),e.forms.get("projectManager").setValue(t.projectManager),e.forms.get("contractor").setValue(t.contractor),e.projectSaved=!0,e.scrollToSection("projectAdditionalData"),e.projectEngineersForm.controls[0].get("project").setValue({id:t.id}),e.projectWorkStagesForm.controls[0].get("project").setValue({id:t.id}),e.projectFilesForm.controls[0].get("project").setValue({id:t.id})}))}))}},{key:"scrollToSection",value:function(e){0!=$(".section-"+e).length&&$("html, body").animate({scrollTop:$(".section-"+e).offset().top},1e3)}},{key:"receiveProjectEngineer",value:function(e,t){this.projectEngineersForm.controls[t].get("engineer").setValue(e.engineer)}},{key:"addEngineer",value:function(){var e=this.fb.group({id:null,engineer:[null,[u.F.required,this.override.validateEntityId.bind(this)]],project:[{id:this.forms.get("id").value},[u.F.required,this.override.validateEntityId.bind(this)]]});this.projectEngineersForm.push(e)}},{key:"removeEngineerRow",value:function(e){var t=this,n=this.projectEngineersForm.controls[e].value;console.log(n),null!=n.id?this.entity.delete(v.a.projectEngineer.delete,n,n.id).then((function(n){n.subscribe((function(n){t.entity.showSuccessToast(n.result),t.projectEngineersForm.removeAt(e),0===t.projectEngineersForm.length&&t.addEngineer()}))})):this.projectEngineersForm.removeAt(e)}},{key:"saveEngineers",value:function(){var e=this,t=this.projectEngineersForm.value;t.forEach((function(t){if(null===t.project.id)throw e.entity.showErrorToast(null,e.translate.instant("Project Not Saved please save it")),new Error(e.translate.instant("Project Not Saved please save it"))}));var n=t.filter((function(e){return null===e.id}));console.log(n),this.entity.save(v.a.projectEngineer.post,t).then((function(t){t.subscribe((function(t){t&&(console.log(t),(t=t).forEach((function(t){e.projectEngineersForm.controls.find((function(e){return e.value.fileName==t.fileName})).get("id").setValue(t.id)})))}))})).catch((function(e){console.log(e)}))}},{key:"receiveWorkStage",value:function(e,t){this.projectWorkStagesForm.controls[t].get("workStage").setValue(e.workStage)}},{key:"addProjectWorkStage",value:function(){var e=this.fb.group({id:null,workStage:[null,[u.F.required,this.override.validateEntityId.bind(this)]],project:[{id:this.forms.get("id").value},[u.F.required,this.override.validateEntityId.bind(this)]],completionRate:[0,[u.F.required,u.F.min(0),u.F.max(100)]]});this.projectWorkStagesForm.push(e)}},{key:"removProjectWorkStage",value:function(e){var t=this,n=this.projectWorkStagesForm.controls[e].value;null!=n.id?this.entity.delete(v.a.projectWorkStage.delete,n,n.id).then((function(n){n.subscribe((function(n){t.entity.showSuccessToast(n.result),t.projectWorkStagesForm.removeAt(e),0===t.projectWorkStagesForm.length&&t.addProjectWorkStage()}))})):this.projectWorkStagesForm.removeAt(e)}},{key:"saveWorkStages",value:function(){var e=this,t=this.projectWorkStagesForm.value;t.forEach((function(t){if(null===t.project.id)throw e.entity.showErrorToast(null,e.translate.instant("Project Not Saved please save it")),new Error(e.translate.instant("Project Not Saved please save it"))}));var n=t.filter((function(e){return null==e.id})),r=t.filter((function(e){return null!=e.id}));n.forEach((function(t){e.entity.save(v.a.projectWorkStage.post,[t]).then((function(t){t.subscribe((function(t){t&&(e.projectWorkStagesForm.patchValue(t),console.log(e.projectWorkStagesForm.value))}))}))})),r.forEach((function(t){e.entity.update(v.a.projectWorkStage.put,t,t.id).then((function(t){t.subscribe((function(t){t&&(e.projectWorkStagesForm.patchValue(t),console.log(e.projectWorkStagesForm.value))}))}))}))}},{key:"receiveFiles",value:function(e,t){this.projectFilesForm.controls[t].get("fileUrl").setValue(e.fileUrl)}},{key:"addProjectFile",value:function(){var e=this.fb.group({id:null,project:[{id:this.forms.get("id").value},[u.F.required,this.override.validateEntityId.bind(this)]],fileUrl:[null,[u.F.required]],fileName:[null,[u.F.required]],fileType:[null,[u.F.required]]});this.projectFilesForm.push(e)}},{key:"removeProjectFile",value:function(e){var t=this,n=this.projectFilesForm.controls[e].get("fileUrl").value;null!=n&&this.deleteFile(n);var r=this.projectFilesForm.controls[e].value;null!=r.id?this.entity.delete(v.a.projectFile.delete,r,r.id).then((function(n){n.subscribe((function(n){t.entity.showSuccessToast(n.result),t.projectFilesForm.removeAt(e),0===t.projectFilesForm.length&&t.addProjectFile()}))})):this.projectFilesForm.removeAt(e)}},{key:"saveProjectFiles",value:function(){var e=this,t=this.projectFilesForm.value;t.forEach((function(t){if(null===t.project.id)throw e.entity.showErrorToast(null,e.translate.instant("Project Not Saved please save it")),new Error(e.translate.instant("Project Not Saved please save it"))}));var n=t.filter((function(e){return null==e.id}));this.entity.save(v.a.projectFile.post,n).then((function(t){t.subscribe((function(t){t&&(t=t).forEach((function(t){e.projectFilesForm.controls.find((function(e){return e.value.fileName==t.fileName})).get("id").setValue(t.id)}))}))}))}},{key:"deleteFile",value:function(e){this.storage.storage.refFromURL(e).delete()}},{key:"showWorkStageFiles",value:function(e){this.windowRef=this.windowService.open(e,{title:"Select ",closeOnEsc:!0,hasBackdrop:!0,windowClass:"danger"})}}]),e}()).\u0275fac=function(e){return new(e||ce)(o["\u0275\u0275directiveInject"](s.e),o["\u0275\u0275directiveInject"](c.a),o["\u0275\u0275directiveInject"](f.a),o["\u0275\u0275directiveInject"](g.a),o["\u0275\u0275directiveInject"](l.a),o["\u0275\u0275directiveInject"](l.c),o["\u0275\u0275directiveInject"](u.f),o["\u0275\u0275directiveInject"](h.Vb))},ce.\u0275cmp=o["\u0275\u0275defineComponent"]({type:ce,selectors:[["ngx-project-control"]],decls:145,vars:131,consts:[["active","",3,"tabTitle"],[3,"formGroup"],[1,"row"],[1,"col-md-12"],[1,"row","colors"],[1,"col-8","item","text-heading"],[1,"col"],[1,"text-info"],[1,"col","text-center"],["nbButton","","hero","","nbPopover","alt + a","nbPopoverTrigger","hint","nbPopoverPlacement","right","accesskey","a","routerLink","/pages/project/all",3,"status","shape","size"],["nbButton","","hero","","nbPopover","alt + s","nbPopoverTrigger","hint","nbPopoverPlacement","right","accesskey","s",3,"status","shape","disabled","size","click"],["nbButton","","hero","","nbPopover","alt + p","nbPopoverTrigger","hint","nbPopoverPlacement","right","accesskey","p",3,"status","shape","disabled","size","click"],[1,"col-md-6"],[1,"text-danger"],["for","code",1,"label"],["for","code",1,"label","text-danger"],["type","text","formControlName","code","id","code","name","code","nbInput","","fullWidth","","fieldSize","medium","shape","rectangle",3,"placeholder"],["code",""],["status","warning","accent","primary",4,"ngIf"],["for","nameEn",1,"label"],["for","nameEn",1,"label","text-danger"],["type","text","formControlName","nameEn","id","nameEn","name","nameEn","nbInput","","fullWidth","","fieldSize","medium","shape","rectangle",3,"placeholder"],["for","nameAr",1,"label"],["for","nameAr",1,"label","text-danger"],["type","text","formControlName","nameAr","id","nameAr","name","nameAr","nbInput","","fullWidth","","fieldSize","medium","shape","rectangle",3,"placeholder"],["for","projectStatus",1,"label"],["for","projectStatus",1,"label","text-danger"],["id","projectStatus","formControlName","projectStatus","name","projectStatus","fullWidth","","fieldSize","medium","shape","rectangle",3,"disabled","placeholder"],["value","active"],["value","stopped"],["value","ended"],["for","workType",1,"label"],["for","workType",1,"label","text-danger"],["id","workType","formControlName","workType","name","workType","fullWidth","","fieldSize","medium","shape","rectangle",3,"disabled","placeholder"],["value","design"],["value","supervision"],["value","designAndSupervision"],["id","entity",3,"disabled","field","form","isEditMode","formValue"],[1,"col-md-4"],["for","locationLat",1,"label"],["for","locationLat",1,"label","text-danger"],["type","number","formControlName","locationLat","id","locationLat","name","locationLat","step","0.001","nbInput","","fullWidth","","fieldSize","medium","shape","rectangle",3,"placeholder"],["for","locationLng",1,"label"],["for","locationLng",1,"label","text-danger"],["type","number","formControlName","locationLng","id","locationLng","name","locationLng","step","0.001","nbInput","","fullWidth","","fieldSize","medium","shape","rectangle",3,"placeholder"],["for","areaRadius",1,"label"],["for","areaRadius",1,"label","text-danger"],["type","number","formControlName","areaRadius","id","areaRadius","name","areaRadius","nbInput","","fullWidth","","fieldSize","medium","shape","rectangle",3,"placeholder"],[1,"row","pt-2"],[3,"latitude","longitude","zoom","disableDefaultUI","zoomControl","mapClick"],[3,"latitude","longitude","radius","fillColor","fillOpacity","circleDraggable","editable","dragEnd","radiusChange"],["class","section-projectAdditionalData",4,"ngIf"],[3,"tabTitle",4,"ngIf"],["status","warning","accent","primary"],[1,"section-projectAdditionalData"],[1,"col-md-5"],[1,"col-8"],[1,"col-4"],["nbButton","","fullWidth","","hero","",3,"status","disabled","shape","size","click"],[1,"listCard"],[1,"col-md-9","text-center"],[1,"col-md-2","text-center"],["class","row",3,"formGroup",4,"ngFor","ngForOf"],[1,"col-md-7"],[1,"col-md-4","text-center"],["for","projectStatus ",1,"label"],[1,"col-md-3","text-center"],["for","files",1,"label"],[1,"col-10"],[1,"col-2"],[1,"col-6","text-center"],[1,"col-3","text-center"],[1,"col-2","text-center"],[1,"col-1","text-center"],[1,"row",3,"formGroup"],["class","col-md-2",4,"ngIf"],[1,"col-md-2"],[1,"row","pt-3"],["icon","plus",1,"col-md-6",3,"click"],["icon","trash",1,"col-md-6",3,"click"],[1,"col-md-3"],["type","number","min","0","max","100","formControlName","completionRate","id","completionRate","name","completionRate","nbInput","","fullWidth","","fieldSize","medium","shape","rectangle",3,"placeholder"],["nbButton","","fullWidth","","hero","",3,"status","id","disabled","shape","size","click"],["contentTemplate",""],[3,"stage"],[1,"col-6"],[1,"col-3"],["type","text","formControlName","fileName","id","fileName","name","fileName","nbInput","","fullWidth","","fieldSize","medium","shape","rounded",3,"placeholder"],["type","text","formControlName","fileType","id","fileType","name","fileType","nbInput","","fullWidth","","fieldSize","medium","shape","rounded",3,"placeholder"],["class","col-1",4,"ngIf"],[1,"col-1"],["icon","plus",1,"col-6",3,"click"],["icon","trash",1,"col-6",3,"click"],[3,"tabTitle"],[3,"projectId"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"nb-tabset"),o["\u0275\u0275elementStart"](1,"nb-tab",0),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementStart"](3,"form",1),o["\u0275\u0275elementStart"](4,"div",2),o["\u0275\u0275elementStart"](5,"nb-card",3),o["\u0275\u0275elementStart"](6,"nb-card-header",4),o["\u0275\u0275elementStart"](7,"div",5),o["\u0275\u0275elementStart"](8,"div",2),o["\u0275\u0275elementStart"](9,"div",6),o["\u0275\u0275elementStart"](10,"h4",7),o["\u0275\u0275text"](11),o["\u0275\u0275pipe"](12,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](13,"div",8),o["\u0275\u0275elementStart"](14,"button",9),o["\u0275\u0275text"](15),o["\u0275\u0275pipe"](16,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](17,"div",8),o["\u0275\u0275elementStart"](18,"button",10),o["\u0275\u0275listener"]("click",(function(){return t.onSubmit()})),o["\u0275\u0275text"](19),o["\u0275\u0275pipe"](20,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](21,"div",8),o["\u0275\u0275elementStart"](22,"button",11),o["\u0275\u0275listener"]("click",(function(){return t.print()})),o["\u0275\u0275text"](23),o["\u0275\u0275pipe"](24,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](25,"div",2),o["\u0275\u0275elementStart"](26,"nb-card",12),o["\u0275\u0275elementStart"](27,"nb-card-header"),o["\u0275\u0275elementStart"](28,"h6",13),o["\u0275\u0275text"](29),o["\u0275\u0275pipe"](30,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](31,"nb-card-body"),o["\u0275\u0275elementStart"](32,"div",2),o["\u0275\u0275elementStart"](33,"div",3),o["\u0275\u0275elementStart"](34,"label",14),o["\u0275\u0275text"](35),o["\u0275\u0275pipe"](36,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](37,"label",15),o["\u0275\u0275text"](38,"*"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](39,"input",16,17),o["\u0275\u0275pipe"](41,"translate"),o["\u0275\u0275template"](42,H,3,4,"nb-alert",18),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](43,"div",2),o["\u0275\u0275elementStart"](44,"div",12),o["\u0275\u0275elementStart"](45,"label",19),o["\u0275\u0275text"](46,"Project Name"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](47,"label",20),o["\u0275\u0275text"](48,"*"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](49,"input",21),o["\u0275\u0275pipe"](50,"translate"),o["\u0275\u0275template"](51,J,3,4,"nb-alert",18),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](52,"div",12),o["\u0275\u0275elementStart"](53,"label",22),o["\u0275\u0275text"](54,"\u0627\u0633\u0645 \u0627\u0644\u0645\u0634\u0631\u0648\u0639"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](55,"label",23),o["\u0275\u0275text"](56,"*"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](57,"input",24),o["\u0275\u0275pipe"](58,"translate"),o["\u0275\u0275template"](59,K,3,4,"nb-alert",18),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](60,"div",2),o["\u0275\u0275elementStart"](61,"div",12),o["\u0275\u0275elementStart"](62,"label",25),o["\u0275\u0275text"](63),o["\u0275\u0275pipe"](64,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](65,"label",26),o["\u0275\u0275text"](66,"*"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](67,"nb-select",27),o["\u0275\u0275pipe"](68,"translate"),o["\u0275\u0275elementStart"](69,"nb-option",28),o["\u0275\u0275text"](70),o["\u0275\u0275pipe"](71,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](72,"nb-option",29),o["\u0275\u0275text"](73),o["\u0275\u0275pipe"](74,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](75,"nb-option",30),o["\u0275\u0275text"](76),o["\u0275\u0275pipe"](77,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](78,Q,3,4,"nb-alert",18),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](79,"div",12),o["\u0275\u0275elementStart"](80,"label",31),o["\u0275\u0275text"](81),o["\u0275\u0275pipe"](82,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](83,"label",32),o["\u0275\u0275text"](84,"*"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](85,"nb-select",33),o["\u0275\u0275pipe"](86,"translate"),o["\u0275\u0275elementStart"](87,"nb-option",34),o["\u0275\u0275text"](88),o["\u0275\u0275pipe"](89,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](90,"nb-option",35),o["\u0275\u0275text"](91),o["\u0275\u0275pipe"](92,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](93,"nb-option",36),o["\u0275\u0275text"](94),o["\u0275\u0275pipe"](95,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](96,X,3,4,"nb-alert",18),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](97,"div",2),o["\u0275\u0275elementStart"](98,"div",12),o["\u0275\u0275elementStart"](99,"entity",37),o["\u0275\u0275listener"]("formValue",(function(e){return t.receiveProjectCategory(e)})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](100,"div",12),o["\u0275\u0275elementStart"](101,"entity",37),o["\u0275\u0275listener"]("formValue",(function(e){return t.receiveProjectManager(e)})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](102,"div",2),o["\u0275\u0275elementStart"](103,"div",12),o["\u0275\u0275elementStart"](104,"entity",37),o["\u0275\u0275listener"]("formValue",(function(e){return t.receiveProjectOwner(e)})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](105,"div",12),o["\u0275\u0275elementStart"](106,"entity",37),o["\u0275\u0275listener"]("formValue",(function(e){return t.receiveContractor(e)})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](107,"div",12),o["\u0275\u0275elementStart"](108,"nb-card"),o["\u0275\u0275elementStart"](109,"nb-card-header"),o["\u0275\u0275elementStart"](110,"h6",13),o["\u0275\u0275text"](111),o["\u0275\u0275pipe"](112,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](113,"nb-card-body"),o["\u0275\u0275elementStart"](114,"div",2),o["\u0275\u0275elementStart"](115,"div",38),o["\u0275\u0275elementStart"](116,"label",39),o["\u0275\u0275text"](117),o["\u0275\u0275pipe"](118,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](119,"label",40),o["\u0275\u0275text"](120,"*"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](121,"input",41),o["\u0275\u0275pipe"](122,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](123,"div",38),o["\u0275\u0275elementStart"](124,"label",42),o["\u0275\u0275text"](125),o["\u0275\u0275pipe"](126,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](127,"label",43),o["\u0275\u0275text"](128,"*"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](129,"input",44),o["\u0275\u0275pipe"](130,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](131,"div",38),o["\u0275\u0275elementStart"](132,"label",45),o["\u0275\u0275text"](133),o["\u0275\u0275pipe"](134,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](135,"label",46),o["\u0275\u0275text"](136,"*"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](137,"input",47),o["\u0275\u0275pipe"](138,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](139,"div",48),o["\u0275\u0275elementStart"](140,"agm-map",49),o["\u0275\u0275listener"]("mapClick",(function(e){return t.mapClicked(e)})),o["\u0275\u0275elementStart"](141,"agm-circle",50),o["\u0275\u0275listener"]("dragEnd",(function(e){return t.circleDragEnd(e)}))("radiusChange",(function(e){return t.circleRadiusChanged(e)})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](142,ie,102,63,"div",51),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](143,le,3,4,"nb-tab",52),o["\u0275\u0275template"](144,oe,3,4,"nb-tab",52),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275propertyInterpolate"]("tabTitle",o["\u0275\u0275pipeBind1"](2,77,"Project")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("formGroup",t.forms),o["\u0275\u0275advance"](8),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](12,79,"project Control")),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("status","info")("shape","round")("size","medium"),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](16,81,"viewAll")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("status","danger")("shape","round")("disabled",!t.forms.valid||t.projectSaved)("size","medium"),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](20,83,"save")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("status","warning")("shape","round")("disabled",!t.forms.valid)("size","medium"),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](24,85,"print")," "),o["\u0275\u0275advance"](6),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](30,87,"projectdata")),o["\u0275\u0275advance"](6),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](36,89,"code")),o["\u0275\u0275advance"](4),o["\u0275\u0275propertyInterpolate"]("placeholder",o["\u0275\u0275pipeBind1"](41,91,"code")),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngIf",t.forms.get("code").touched&&t.forms.get("code").invalid),o["\u0275\u0275advance"](7),o["\u0275\u0275propertyInterpolate"]("placeholder",o["\u0275\u0275pipeBind1"](50,93,"Project Name")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",t.forms.get("nameEn").touched&&t.forms.get("nameEn").invalid),o["\u0275\u0275advance"](6),o["\u0275\u0275propertyInterpolate"]("placeholder",o["\u0275\u0275pipeBind1"](58,95,"\u0627\u0633\u0645 \u0627\u0644\u0645\u0634\u0631\u0648\u0639")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",t.forms.get("nameAr").touched&&t.forms.get("nameAr").invalid),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](64,97,"projectStatus")),o["\u0275\u0275advance"](4),o["\u0275\u0275propertyInterpolate"]("placeholder",o["\u0275\u0275pipeBind1"](68,99,"projectStatus")),o["\u0275\u0275property"]("disabled",t.view),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](71,101,"active")),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](74,103,"stopped")),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](77,105,"ended")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",t.forms.get("projectStatus").touched&&t.forms.get("projectStatus").invalid),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](82,107,"workType")),o["\u0275\u0275advance"](4),o["\u0275\u0275propertyInterpolate"]("placeholder",o["\u0275\u0275pipeBind1"](86,109,"workType")),o["\u0275\u0275property"]("disabled",t.view),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](89,111,"design")),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](92,113,"Supervision")),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](95,115,"DesignAndSupervision ")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",t.forms.get("workType").touched&&t.forms.get("workType").invalid),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("disabled",t.view)("field",t.projectCategory)("form",t.forms)("isEditMode",t.isEditMode||t.view),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("disabled",t.view)("field",t.projectManager)("form",t.forms)("isEditMode",t.isEditMode||t.view),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("disabled",t.view)("field",t.projectOwner)("form",t.forms)("isEditMode",t.isEditMode),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("disabled",t.view)("field",t.contractor)("form",t.forms)("isEditMode",t.isEditMode),o["\u0275\u0275advance"](5),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](112,117,"projectLocation")),o["\u0275\u0275advance"](6),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](118,119,"latitude")),o["\u0275\u0275advance"](4),o["\u0275\u0275propertyInterpolate"]("placeholder",o["\u0275\u0275pipeBind1"](122,121,"latitude")),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](126,123,"longitude")),o["\u0275\u0275advance"](4),o["\u0275\u0275propertyInterpolate"]("placeholder",o["\u0275\u0275pipeBind1"](130,125,"longitude")),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](134,127,"Radius")),o["\u0275\u0275advance"](4),o["\u0275\u0275propertyInterpolate"]("placeholder",o["\u0275\u0275pipeBind1"](138,129,"Radius")),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("latitude",t.radiusLat+1e-4)("longitude",t.radiusLng+1e-4)("zoom",t.zoom)("disableDefaultUI",!0)("zoomControl",!0),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("latitude",t.radiusLat)("longitude",t.radiusLng)("radius",t.forms.get("areaRadius").value)("fillColor","red")("fillOpacity",.5)("circleDraggable",!0)("editable",!0),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.projectSaved||t.isEditMode),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.projectSaved||t.isEditMode),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.projectSaved||t.isEditMode))},directives:[h.xb,h.wb,u.H,u.s,u.k,h.p,h.s,h.l,l.d,h.o,u.c,h.K,u.r,u.i,i.u,h.mb,h.bb,b.a,u.x,S.c,S.a,h.j,h.T,i.t,h.U,h.g,x,E.a,D,z],pipes:[s.d],styles:[".nb-theme-corporate   [_nghost-%COMP%]     agm-map, .nb-theme-cosmic   [_nghost-%COMP%]     agm-map, .nb-theme-dark   [_nghost-%COMP%]     agm-map, .nb-theme-default   [_nghost-%COMP%]     agm-map{width:100%;height:17rem}.listCard[_ngcontent-%COMP%]{padding:0!important}"]}),ce),me=((de=function(){function e(t,n,r){_classCallCheck(this,e),this.override=t,this.entity=n,this.router=r}return _createClass(e,[{key:"canActivate",value:function(e,t){return!0}}]),e}()).\u0275fac=function(e){return new(e||de)(o["\u0275\u0275inject"](c.a),o["\u0275\u0275inject"](f.a),o["\u0275\u0275inject"](l.c))},de.\u0275prov=o["\u0275\u0275defineInjectable"]({token:de,factory:de.\u0275fac,providedIn:"root"}),de),ue=[{path:"",component:d,children:[{path:"",component:m,canActivate:[me]},{path:"all",component:m,canActivate:[me]},{path:"control",component:pe,canActivate:[me]},{path:"edit/:entityId",component:pe,canActivate:[me]},{path:"view/:entityId",component:pe,canActivate:[me]}]}],fe=((se=function e(){_classCallCheck(this,e)}).\u0275mod=o["\u0275\u0275defineNgModule"]({type:se}),se.\u0275inj=o["\u0275\u0275defineInjector"]({factory:function(e){return new(e||se)},imports:[[l.g.forChild(ue)],l.g]}),se),ve=n("Tk/f"),ge=n("PAYq"),he=n("vTDv");n.d(t,"ProjectModule",(function(){return Se}));var be,Se=((be=function e(){_classCallCheck(this,e)}).\u0275mod=o["\u0275\u0275defineNgModule"]({type:be}),be.\u0275inj=o["\u0275\u0275defineInjector"]({factory:function(e){return new(e||be)},imports:[[i.c,fe,s.c,ve.a,ge.a,h.t,h.L,h.ob,u.m,u.B,h.k,S.b,h.m,h.V,h.i,h.yb,h.Ob,h.J,he.a]]}),be)}}]);