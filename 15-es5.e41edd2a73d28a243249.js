function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{BWot:function(e,t,n){"use strict";n.r(t);var a,l,r=n("ofXK"),i=n("3Pt+"),o=n("Tk/f"),s=n("tyNb"),d=n("fXoL"),m=((a=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||a)},a.\u0275cmp=d["\u0275\u0275defineComponent"]({type:a,selectors:[["ngx-project-finance"]],decls:1,vars:0,template:function(e,t){1&e&&d["\u0275\u0275element"](0,"router-outlet")},directives:[s.h],styles:[""]}),a),c=n("uZM4"),p=n("sYmb"),u=n("944j"),f=((l=function(){function e(t,n,a){var l=this;_classCallCheck(this,e),this.translate=t,this.override=n,this.datepipe=a,this.entityData={name:"projectFinances",all:{columnDefs:[{headerName:this.translate.instant("id"),field:"id",checkboxSelection:!0,filter:!0,sortable:!0,editable:!1},{headerName:this.translate.instant("project"),field:this.override.isRTL()?"project.nameAr":"project.nameEn",filter:!0,checkboxSelection:!1,sortable:!0,editable:!1},{headerName:this.translate.instant("instalmentFromDate"),field:"instalmentFromDate",checkboxSelection:!1,filter:!0,sortable:!0,editable:!1,cellRenderer:function(e){return l.datepipe.transform(e.value,"dd/MM/yyyy")}},{headerName:this.translate.instant("instalmentToDate"),field:"instalmentToDate",checkboxSelection:!1,filter:!0,sortable:!0,editable:!1,cellRenderer:function(e){return l.datepipe.transform(e.value,"dd/MM/yyyy")}},{headerName:this.translate.instant("instalmentType"),field:"instalmentType",checkboxSelection:!1,filter:!0,sortable:!0,editable:!1,cellRenderer:function(e){return l.translate.instant(e.value)}},{headerName:this.translate.instant("totalInstalmentCost"),field:"totalInstalmentCost",checkboxSelection:!1,filter:!0,sortable:!0,editable:!1},{headerName:this.translate.instant("totalProjectCost"),field:"totalProjectCost",checkboxSelection:!1,filter:!0,sortable:!0,editable:!1}]},edit:!1,view:!0,add:!0,delete:!0,upload:!1}}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||l)(d["\u0275\u0275directiveInject"](p.e),d["\u0275\u0275directiveInject"](c.a),d["\u0275\u0275directiveInject"](r.f))},l.\u0275cmp=d["\u0275\u0275defineComponent"]({type:l,selectors:[["ngx-all-project-finance"]],decls:1,vars:1,consts:[[3,"entityData"]],template:function(e,t){1&e&&d["\u0275\u0275element"](0,"app-all-generic",0),2&e&&d["\u0275\u0275property"]("entityData",t.entityData)},directives:[u.a],styles:[""]}),l),v=n("JuyU"),h=n("m01I"),b=n("aceb"),y=n("EMTt");function I(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"nb-alert",39),d["\u0275\u0275text"](1),d["\u0275\u0275pipe"](2,"translate"),d["\u0275\u0275elementEnd"]()),2&e&&(d["\u0275\u0275advance"](1),d["\u0275\u0275textInterpolate2"]("","instalmentFromDate"," ",d["\u0275\u0275pipeBind1"](2,2,"is Invalid")," "))}function g(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"nb-alert",39),d["\u0275\u0275text"](1),d["\u0275\u0275pipe"](2,"translate"),d["\u0275\u0275elementEnd"]()),2&e&&(d["\u0275\u0275advance"](1),d["\u0275\u0275textInterpolate2"]("","instalmentToDate"," ",d["\u0275\u0275pipeBind1"](2,2,"is Invalid")," "))}function S(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"nb-alert",39),d["\u0275\u0275text"](1),d["\u0275\u0275pipe"](2,"translate"),d["\u0275\u0275elementEnd"]()),2&e&&(d["\u0275\u0275advance"](1),d["\u0275\u0275textInterpolate2"]("","totalProjectCost"," ",d["\u0275\u0275pipeBind1"](2,2,"is Invalid")," "))}function x(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"nb-alert",39),d["\u0275\u0275text"](1),d["\u0275\u0275pipe"](2,"translate"),d["\u0275\u0275elementEnd"]()),2&e&&(d["\u0275\u0275advance"](1),d["\u0275\u0275textInterpolate2"]("","totalInstalmentCost"," ",d["\u0275\u0275pipeBind1"](2,2,"is Invalid")," "))}function E(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"nb-alert",39),d["\u0275\u0275text"](1),d["\u0275\u0275pipe"](2,"translate"),d["\u0275\u0275elementEnd"]()),2&e&&(d["\u0275\u0275advance"](1),d["\u0275\u0275textInterpolate2"]("","instalmentType"," ",d["\u0275\u0275pipeBind1"](2,2,"is Invalid")," "))}function j(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"nb-alert",39),d["\u0275\u0275text"](1),d["\u0275\u0275pipe"](2,"translate"),d["\u0275\u0275elementEnd"]()),2&e&&(d["\u0275\u0275advance"](1),d["\u0275\u0275textInterpolate2"]("","dueDate"," ",d["\u0275\u0275pipeBind1"](2,2,"is Invalid")," "))}function C(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"nb-alert",39),d["\u0275\u0275text"](1),d["\u0275\u0275pipe"](2,"translate"),d["\u0275\u0275elementEnd"]()),2&e&&(d["\u0275\u0275advance"](1),d["\u0275\u0275textInterpolate2"]("","instalmentValue"," ",d["\u0275\u0275pipeBind1"](2,2,"is Invalid")," "))}function k(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"nb-alert",39),d["\u0275\u0275text"](1),d["\u0275\u0275pipe"](2,"translate"),d["\u0275\u0275elementEnd"]()),2&e&&(d["\u0275\u0275advance"](1),d["\u0275\u0275textInterpolate2"]("","instalmentStatus"," ",d["\u0275\u0275pipeBind1"](2,2,"is Invalid")," "))}function D(e,t){if(1&e){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"div",57),d["\u0275\u0275elementStart"](1,"div",58),d["\u0275\u0275elementStart"](2,"nb-action",59),d["\u0275\u0275listener"]("click",(function(){d["\u0275\u0275restoreView"](n);var e=d["\u0275\u0275nextContext"](3);return e.addProjectInstallment(e.forms.get("instalmentType").value)})),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](3,"nb-action",60),d["\u0275\u0275listener"]("click",(function(){d["\u0275\u0275restoreView"](n);var e=d["\u0275\u0275nextContext"]().index;return d["\u0275\u0275nextContext"](2).removeProjectInstallment(e)})),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()}}function w(e,t){if(1&e){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"div",41),d["\u0275\u0275elementStart"](1,"div",42),d["\u0275\u0275elementStart"](2,"label",43),d["\u0275\u0275text"](3),d["\u0275\u0275pipe"](4,"translate"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](5,"label",44),d["\u0275\u0275text"](6,"*"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275element"](7,"input",45),d["\u0275\u0275element"](8,"nb-datepicker",null,46),d["\u0275\u0275template"](10,j,3,4,"nb-alert",17),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](11,"div",42),d["\u0275\u0275elementStart"](12,"label",47),d["\u0275\u0275text"](13),d["\u0275\u0275pipe"](14,"translate"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](15,"label",48),d["\u0275\u0275text"](16,"*"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](17,"input",49,50),d["\u0275\u0275listener"]("change",(function(){return d["\u0275\u0275restoreView"](n),d["\u0275\u0275nextContext"](2).calculateProjectTotal()})),d["\u0275\u0275pipe"](19,"translate"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275template"](20,C,3,4,"nb-alert",17),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](21,"div"),d["\u0275\u0275elementStart"](22,"label",51),d["\u0275\u0275text"](23),d["\u0275\u0275pipe"](24,"translate"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](25,"label",52),d["\u0275\u0275text"](26,"*"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](27,"nb-select",53),d["\u0275\u0275pipe"](28,"translate"),d["\u0275\u0275elementStart"](29,"nb-option",54),d["\u0275\u0275text"](30),d["\u0275\u0275pipe"](31,"translate"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](32,"nb-option",55),d["\u0275\u0275text"](33),d["\u0275\u0275pipe"](34,"translate"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275template"](35,k,3,4,"nb-alert",17),d["\u0275\u0275elementEnd"](),d["\u0275\u0275template"](36,D,4,0,"div",56),d["\u0275\u0275element"](37,"hr"),d["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit,l=t.index,r=d["\u0275\u0275reference"](9),i=d["\u0275\u0275nextContext"](2),o=null,s=(null==(o=i.projectInstalments.controls[l].get("dueDate"))?null:o.touched)&&(null==(o=i.projectInstalments.controls[l].get("dueDate"))?null:o.invalid),m=null,c=(null==(m=i.projectInstalments.controls[l].get("instalmentValue"))?null:m.touched)&&(null==(m=i.projectInstalments.controls[l].get("instalmentValue"))?null:m.invalid),p=null,u=(null==(p=i.projectInstalments.controls[l].get("instalmentStatus"))?null:p.touched)&&(null==(p=i.projectInstalments.controls[l].get("instalmentStatus"))?null:p.invalid);d["\u0275\u0275property"]("formGroup",a),d["\u0275\u0275advance"](3),d["\u0275\u0275textInterpolate"](d["\u0275\u0275pipeBind1"](4,17,"dueDate")),d["\u0275\u0275advance"](4),d["\u0275\u0275property"]("readOnly",i.isEditMode)("nbDatepicker",r),d["\u0275\u0275advance"](3),d["\u0275\u0275property"]("ngIf",s),d["\u0275\u0275advance"](3),d["\u0275\u0275textInterpolate"](d["\u0275\u0275pipeBind1"](14,19,"instalmentValue")),d["\u0275\u0275advance"](4),d["\u0275\u0275propertyInterpolate"]("placeholder",d["\u0275\u0275pipeBind1"](19,21,"Instalment Value")),d["\u0275\u0275property"]("readOnly",i.isEditMode),d["\u0275\u0275advance"](3),d["\u0275\u0275property"]("ngIf",c),d["\u0275\u0275advance"](1),d["\u0275\u0275attribute"]("class",i.isEditMode?"col-md-3":"col-md-2"),d["\u0275\u0275advance"](2),d["\u0275\u0275textInterpolate"](d["\u0275\u0275pipeBind1"](24,23,"instalmentStatus")),d["\u0275\u0275advance"](4),d["\u0275\u0275propertyInterpolate"]("placeholder",d["\u0275\u0275pipeBind1"](28,25,"Instalment Status")),d["\u0275\u0275property"]("disabled",i.isEditMode),d["\u0275\u0275advance"](3),d["\u0275\u0275textInterpolate1"]("",d["\u0275\u0275pipeBind1"](31,27,"Paid")," "),d["\u0275\u0275advance"](3),d["\u0275\u0275textInterpolate"](d["\u0275\u0275pipeBind1"](34,29,"unPaid")),d["\u0275\u0275advance"](2),d["\u0275\u0275property"]("ngIf",u),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",!i.isEditMode)}}function V(e,t){if(1&e&&(d["\u0275\u0275elementStart"](0,"nb-card"),d["\u0275\u0275elementStart"](1,"nb-card-header"),d["\u0275\u0275text"](2),d["\u0275\u0275pipe"](3,"translate"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](4,"nb-card-body"),d["\u0275\u0275template"](5,w,38,31,"div",40),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()),2&e){var n=d["\u0275\u0275nextContext"]();d["\u0275\u0275advance"](2),d["\u0275\u0275textInterpolate1"](" ",d["\u0275\u0275pipeBind1"](3,2,"Installments")," "),d["\u0275\u0275advance"](3),d["\u0275\u0275property"]("ngForOf",n.projectInstalments.controls)}}function T(e,t){if(1&e){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"entity",64),d["\u0275\u0275listener"]("formValue",(function(e){d["\u0275\u0275restoreView"](n);var t=d["\u0275\u0275nextContext"]().index;return d["\u0275\u0275nextContext"](2).receiveWorkStage(e,t)})),d["\u0275\u0275elementEnd"]()}if(2&e){var a=d["\u0275\u0275nextContext"]().$implicit,l=d["\u0275\u0275nextContext"](2);d["\u0275\u0275property"]("field",l.relatedWorkStage)("form",a)}}function P(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"nb-alert",39),d["\u0275\u0275text"](1),d["\u0275\u0275pipe"](2,"translate"),d["\u0275\u0275elementEnd"]()),2&e&&(d["\u0275\u0275advance"](1),d["\u0275\u0275textInterpolate2"]("","relatedWorkStage"," ",d["\u0275\u0275pipeBind1"](2,2,"is Invalid")," "))}function B(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"nb-alert",39),d["\u0275\u0275text"](1),d["\u0275\u0275pipe"](2,"translate"),d["\u0275\u0275elementEnd"]()),2&e&&(d["\u0275\u0275advance"](1),d["\u0275\u0275textInterpolate2"]("","instalmentValue"," ",d["\u0275\u0275pipeBind1"](2,2,"is Invalid")," "))}function F(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"nb-alert",39),d["\u0275\u0275text"](1),d["\u0275\u0275pipe"](2,"translate"),d["\u0275\u0275elementEnd"]()),2&e&&(d["\u0275\u0275advance"](1),d["\u0275\u0275textInterpolate2"]("","instalmentStatus"," ",d["\u0275\u0275pipeBind1"](2,2,"is Invalid")," "))}function M(e,t){if(1&e){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"div",57),d["\u0275\u0275elementStart"](1,"div",58),d["\u0275\u0275elementStart"](2,"nb-action",59),d["\u0275\u0275listener"]("click",(function(){d["\u0275\u0275restoreView"](n);var e=d["\u0275\u0275nextContext"](3);return e.addProjectInstallment(e.forms.get("instalmentType").value)})),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](3,"nb-action",60),d["\u0275\u0275listener"]("click",(function(){d["\u0275\u0275restoreView"](n);var e=d["\u0275\u0275nextContext"]().index;return d["\u0275\u0275nextContext"](2).removeProjectInstallment(e)})),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()}}function W(e,t){if(1&e){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"div",41),d["\u0275\u0275elementStart"](1,"div",42),d["\u0275\u0275elementStart"](2,"label",61),d["\u0275\u0275text"](3),d["\u0275\u0275pipe"](4,"translate"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](5,"label",62),d["\u0275\u0275text"](6,"*"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275template"](7,T,1,2,"entity",63),d["\u0275\u0275template"](8,P,3,4,"nb-alert",17),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](9,"div",42),d["\u0275\u0275elementStart"](10,"label",47),d["\u0275\u0275text"](11),d["\u0275\u0275pipe"](12,"translate"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](13,"label",48),d["\u0275\u0275text"](14,"*"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](15,"input",49,50),d["\u0275\u0275listener"]("change",(function(){return d["\u0275\u0275restoreView"](n),d["\u0275\u0275nextContext"](2).calculateProjectTotal()})),d["\u0275\u0275pipe"](17,"translate"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275template"](18,B,3,4,"nb-alert",17),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](19,"div"),d["\u0275\u0275elementStart"](20,"label",51),d["\u0275\u0275text"](21),d["\u0275\u0275pipe"](22,"translate"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](23,"label",52),d["\u0275\u0275text"](24,"*"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](25,"nb-select",53),d["\u0275\u0275pipe"](26,"translate"),d["\u0275\u0275elementStart"](27,"nb-option",54),d["\u0275\u0275text"](28),d["\u0275\u0275pipe"](29,"translate"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](30,"nb-option",55),d["\u0275\u0275text"](31),d["\u0275\u0275pipe"](32,"translate"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275template"](33,F,3,4,"nb-alert",17),d["\u0275\u0275elementEnd"](),d["\u0275\u0275template"](34,M,4,0,"div",56),d["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit,l=t.index,r=d["\u0275\u0275nextContext"](2),i=null,o=(null==(i=r.projectInstalments.controls[l].get("relatedWorkStage"))?null:i.touched)&&(null==(i=r.projectInstalments.controls[l].get("relatedWorkStage"))?null:i.invalid),s=null,m=(null==(s=r.projectInstalments.controls[l].get("instalmentValue"))?null:s.touched)&&(null==(s=r.projectInstalments.controls[l].get("instalmentValue"))?null:s.invalid),c=null,p=(null==(c=r.projectInstalments.controls[l].get("instalmentStatus"))?null:c.touched)&&(null==(c=r.projectInstalments.controls[l].get("instalmentStatus"))?null:c.invalid);d["\u0275\u0275property"]("formGroup",a),d["\u0275\u0275advance"](3),d["\u0275\u0275textInterpolate"](d["\u0275\u0275pipeBind1"](4,16,"relatedWorkStage")),d["\u0275\u0275advance"](4),d["\u0275\u0275property"]("ngIf",null!=r.forms.get("project").value.id),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",o),d["\u0275\u0275advance"](3),d["\u0275\u0275textInterpolate"](d["\u0275\u0275pipeBind1"](12,18,"instalmentValue")),d["\u0275\u0275advance"](4),d["\u0275\u0275propertyInterpolate"]("placeholder",d["\u0275\u0275pipeBind1"](17,20,"instalment Value")),d["\u0275\u0275property"]("readOnly",r.isEditMode),d["\u0275\u0275advance"](3),d["\u0275\u0275property"]("ngIf",m),d["\u0275\u0275advance"](1),d["\u0275\u0275attribute"]("class",r.isEditMode?"col-md-3":"col-md-2"),d["\u0275\u0275advance"](2),d["\u0275\u0275textInterpolate"](d["\u0275\u0275pipeBind1"](22,22,"instalmentStatus")),d["\u0275\u0275advance"](4),d["\u0275\u0275propertyInterpolate"]("placeholder",d["\u0275\u0275pipeBind1"](26,24,"instalment Status")),d["\u0275\u0275property"]("disabled",r.isEditMode),d["\u0275\u0275advance"](3),d["\u0275\u0275textInterpolate1"]("",d["\u0275\u0275pipeBind1"](29,26,"Paid")," "),d["\u0275\u0275advance"](3),d["\u0275\u0275textInterpolate"](d["\u0275\u0275pipeBind1"](32,28,"unPaid")),d["\u0275\u0275advance"](2),d["\u0275\u0275property"]("ngIf",p),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",!r.isEditMode)}}function O(e,t){if(1&e&&(d["\u0275\u0275elementStart"](0,"nb-card"),d["\u0275\u0275elementStart"](1,"nb-card-header"),d["\u0275\u0275text"](2),d["\u0275\u0275pipe"](3,"translate"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](4,"nb-card-body"),d["\u0275\u0275elementStart"](5,"nb-card-body"),d["\u0275\u0275template"](6,W,35,30,"div",40),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()),2&e){var n=d["\u0275\u0275nextContext"]();d["\u0275\u0275advance"](2),d["\u0275\u0275textInterpolate1"](" ",d["\u0275\u0275pipeBind1"](3,2,"Installments")," "),d["\u0275\u0275advance"](4),d["\u0275\u0275property"]("ngForOf",n.projectInstalments.controls)}}var N,q,A=function(){return["/pages/projectFinances/all"]},z=((N=function(){function e(t,n,a,l,r,o,s){_classCallCheck(this,e),this.fb=t,this.override=n,this.translate=a,this.entity=l,this.dp=r,this.router=o,this.route=s,this.isEditMode=!1,this.forms=this.fb.group({id:this.fb.control(null),instalmentFromDate:this.fb.control(null,[i.F.required]),instalmentToDate:this.fb.control(null,[i.F.required]),instalmentType:this.fb.control(null,[i.F.required]),totalProjectCost:this.fb.control(0,[i.F.required]),totalInstalmentCost:this.fb.control(0,[i.F.required]),project:this.fb.control(null,[i.F.required]),projectInstalments:this.fb.array([])}),this.relatedWorkStage={name:"relatedWorkStage",from:"projectWorkStage",label:this.translate.instant("related Work Stage"),required:!0,isEntity:!0,fromArray:!0,optionName:this.override.isRTL()?"workStage.nameAr":"workStage.nameEn",disabled:!1,columns:[{view:this.translate.instant("id"),col:"id"},{view:this.translate.instant("name"),col:this.override.isRTL()?"workStage.nameAr":"workStage.nameEn"},{view:this.translate.instant("workType"),col:"workStage.workType"},{view:this.translate.instant("completionRate"),col:"completionRate"}],exludeView:["createdAt","updatedAt"]},this.project={type:"entity",name:"project",from:"project",label:this.translate.instant("Project"),required:!0,class:"col-md-6",isEntity:!0,optionName:this.override.isRTL()?"nameAr":"nameEn",disabled:!1,multiple:!1,readonly:!1,details:this.translate.instant("Select Project"),validators:[i.F.required,this.override.validateEntityId.bind(this)],exludeView:["imageUrl","projectCategory","projectOwner","contractor","projectManager","locationLat","locationLng","areaRadius","ownerReview","ownerRating","updatedAt","createdAt"],localized:["workType","projectStatus"]}}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.entityId=this.route.snapshot.paramMap.get("entityId"),this.entityId&&(this.isEditMode=!0,this.entity.getOne(h.a.projectFinances.getOne,this.entityId).then((function(t){t.subscribe((function(t){e.forms.get("id").setValue(t.id),e.forms.get("instalmentFromDate").setValue(new Date(t.instalmentFromDate)),e.forms.get("instalmentToDate").setValue(new Date(t.instalmentToDate)),e.forms.get("instalmentType").setValue(t.instalmentType),e.forms.get("totalProjectCost").setValue(t.totalProjectCost),e.forms.get("totalInstalmentCost").setValue(t.totalInstalmentCost),e.forms.get("project").setValue({id:t.project.id,nameAr:t.project.nameAr,nameEn:t.project.nameEn}),t.projectInstalments.forEach((function(n){e.addProjectInstallment(t.instalmentType)})),e.forms.get("projectInstalments").setValue(t.projectInstalments)}))})))}},{key:"clear",value:function(){this.projectInstalments.clear(),this.calculateProjectTotal()}},{key:"addProjectInstallment",value:function(e){switch(e){case"byMonth":var t=this.fb.group({id:this.fb.control(null),projectFinances:this.fb.control(null),relatedWorkStage:this.fb.control(null),dueDate:this.fb.control(null,[i.F.required]),instalmentValue:this.fb.control(0,[i.F.required]),instalmentStatus:this.fb.control(null,[i.F.required])});this.projectInstalments.push(t);break;case"byProgress":var n=this.fb.group({id:this.fb.control(null),projectFinances:this.fb.control(null),dueDate:this.fb.control(null),relatedWorkStage:this.fb.control(null,[i.F.required]),instalmentValue:this.fb.control(0,[i.F.required]),instalmentStatus:this.fb.control(null,[i.F.required])});this.projectInstalments.push(n)}}},{key:"receiveWorkStage",value:function(e,t){this.projectInstalments.controls[t].get("relatedWorkStage").setValue(e.relatedWorkStage)}},{key:"removeProjectInstallment",value:function(e){this.projectInstalments.length>1&&this.projectInstalments.removeAt(e)}},{key:"check",value:function(){console.log(this.forms)}},{key:"recieveProject",value:function(e){this.relatedWorkStage.pathParams=[{key:"projectId",value:e.project.id}],this.forms.get("project").setValue(e.project)}},{key:"onSubmit",value:function(){var e=this,t={project:this.forms.get("project").value,instalmentFromDate:this.dp.transform(this.forms.get("instalmentFromDate").value,"yyyy-MM-dd"),instalmentToDate:this.dp.transform(this.forms.get("instalmentToDate").value,"yyyy-MM-dd"),totalInstalmentCost:this.forms.get("totalInstalmentCost").value,totalProjectCost:this.forms.get("totalInstalmentCost").value,instalmentType:this.forms.get("instalmentType").value,projectInstalments:[]};this.forms.get("projectInstalments").value.forEach((function(n){switch(t.instalmentType){case"byMonth":var a={dueDate:e.dp.transform(n.dueDate,"yyyy-MM-dd"),instalmentStatus:n.instalmentStatus,instalmentValue:n.instalmentValue};t.projectInstalments.push(a);break;case"byProgress":t.projectInstalments.push({relatedWorkStage:n.relatedWorkStage,instalmentStatus:n.instalmentStatus,instalmentValue:n.instalmentValue})}})),this.entity.save(h.a.projectFinances.post,t).then((function(t){t.subscribe((function(t){e.router.navigate(["/pages/projectFinances/all"])}))}))}},{key:"calculateProjectTotal",value:function(){var e=0;this.projectInstalments.value.forEach((function(t){e+=t.instalmentValue})),this.forms.get("totalInstalmentCost").setValue(e)}},{key:"projectInstalments",get:function(){return this.forms.get("projectInstalments")}}]),e}()).\u0275fac=function(e){return new(e||N)(d["\u0275\u0275directiveInject"](i.f),d["\u0275\u0275directiveInject"](c.a),d["\u0275\u0275directiveInject"](p.e),d["\u0275\u0275directiveInject"](v.a),d["\u0275\u0275directiveInject"](r.f),d["\u0275\u0275directiveInject"](s.c),d["\u0275\u0275directiveInject"](s.a))},N.\u0275cmp=d["\u0275\u0275defineComponent"]({type:N,selectors:[["ngx-project-finance-control"]],decls:87,vars:73,consts:[[3,"formGroup"],[1,"row"],[1,"col-md-12"],[1,"row","colors"],[1,"col-8","item","text-heading"],[1,"col"],[1,"text-info"],[1,"col","text-center"],[1,"col-auto"],["nbButton","","hero","","routerLinkActive","router-link-active",3,"status","shape","size","routerLink"],["nbButton","","hero","","hero","",3,"disabled","shape","status","size","click"],[1,"col-md-3"],["id","project",3,"field","form","isEditMode","formValue"],["for","instalmentFromDate",1,"label"],["for","instalmentFromDate",1,"label","text-danger"],["nbInput","","fullWidth","","fieldSize","medium","shape","rectangle","id","instalmentFromDate","formControlName","instalmentFromDate",3,"readOnly","placeholder","nbDatepicker"],["instalmentFromDate",""],["status","warning","accent","primary",4,"ngIf"],["for","instalmentToDate",1,"label"],["for","instalmentToDate",1,"label","text-danger"],["nbInput","","fullWidth","","fieldSize","medium","shape","rectangle","id","instalmentToDate","formControlName","instalmentToDate",3,"readOnly","placeholder","nbDatepicker"],[3,"min"],["instalmentToDate",""],["for","totalProjectCost",1,"label"],["for","totalProjectCost",1,"label","text-danger"],["type","number","formControlName","totalProjectCost","id","totalProjectCost","nbInput","","fullWidth","","fieldSize","medium","shape","rectangle",3,"readOnly","placeholder"],["totalProjectCost",""],[1,"col-md-6"],["for","totalInstalmentCost",1,"label"],["for","totalInstalmentCost",1,"label","text-danger"],["readonly","","type","number","formControlName","totalInstalmentCost","id","totalInstalmentCost","nbInput","","fullWidth","","fieldSize","medium","shape","rectangle",3,"placeholder"],["totalInstalmentCost",""],["for","instalmentType",1,"label"],["for","instalmentType",1,"label","text-danger"],["selected","byMonth","formControlName","instalmentType","fullWidth","","fieldSize","medium","shape","rectangle",3,"disabled","placeholder","selectedChange"],["value","byMonth"],["value","byProgress"],[1,"col-12"],[4,"ngIf"],["status","warning","accent","primary"],["class","row",3,"formGroup",4,"ngFor","ngForOf"],[1,"row",3,"formGroup"],[1,"col-md-4"],["for","dueDate",1,"label"],["for","dueDate",1,"label","text-danger"],["nbInput","","fullWidth","","fieldSize","medium","shape","rectangle","id","dueDate","placeholder","Due Date","formControlName","dueDate",3,"readOnly","nbDatepicker"],["dueDate",""],["for","instalmentValue",1,"label"],["for","instalmentValue",1,"label","text-danger"],["type","number","formControlName","instalmentValue","id","instalmentValue","nbInput","","fullWidth","","fieldSize","medium","shape","rectangle",3,"readOnly","placeholder","change"],["instalmentValue",""],["for","instalmentStatus",1,"label"],["for","instalmentStatus",1,"label","text-danger"],["formControlName","instalmentStatus","fullWidth","","fieldSize","medium","shape","rectangle",3,"disabled","placeholder"],["value","paid"],["value","unPaid"],["class","col-1",4,"ngIf"],[1,"col-1"],[1,"row","pt-3"],["icon","plus",1,"col",3,"click"],["icon","trash",1,"col",3,"click"],["for","relatedWorkStage",1,"label"],["for","relatedWorkStage",1,"label","text-danger"],["id","entity",3,"field","form","formValue",4,"ngIf"],["id","entity",3,"field","form","formValue"]],template:function(e,t){if(1&e&&(d["\u0275\u0275elementStart"](0,"form",0),d["\u0275\u0275elementStart"](1,"div",1),d["\u0275\u0275elementStart"](2,"nb-card",2),d["\u0275\u0275elementStart"](3,"nb-card-header",3),d["\u0275\u0275elementStart"](4,"div",4),d["\u0275\u0275elementStart"](5,"div",1),d["\u0275\u0275elementStart"](6,"div",5),d["\u0275\u0275elementStart"](7,"h4",6),d["\u0275\u0275text"](8),d["\u0275\u0275pipe"](9,"translate"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](10,"div",7),d["\u0275\u0275elementStart"](11,"div",1),d["\u0275\u0275elementStart"](12,"div",8),d["\u0275\u0275elementStart"](13,"button",9),d["\u0275\u0275text"](14),d["\u0275\u0275pipe"](15,"translate"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](16,"div",8),d["\u0275\u0275elementStart"](17,"button",10),d["\u0275\u0275listener"]("click",(function(){return t.onSubmit()})),d["\u0275\u0275text"](18),d["\u0275\u0275pipe"](19,"translate"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](20,"div",1),d["\u0275\u0275elementStart"](21,"nb-card",2),d["\u0275\u0275elementStart"](22,"nb-card-body"),d["\u0275\u0275elementStart"](23,"div",1),d["\u0275\u0275elementStart"](24,"div",11),d["\u0275\u0275elementStart"](25,"entity",12),d["\u0275\u0275listener"]("formValue",(function(e){return t.recieveProject(e)})),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](26,"div",11),d["\u0275\u0275elementStart"](27,"label",13),d["\u0275\u0275text"](28),d["\u0275\u0275pipe"](29,"translate"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](30,"label",14),d["\u0275\u0275text"](31,"*"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275element"](32,"input",15),d["\u0275\u0275pipe"](33,"translate"),d["\u0275\u0275element"](34,"nb-datepicker",null,16),d["\u0275\u0275template"](36,I,3,4,"nb-alert",17),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](37,"div",11),d["\u0275\u0275elementStart"](38,"label",18),d["\u0275\u0275text"](39),d["\u0275\u0275pipe"](40,"translate"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](41,"label",19),d["\u0275\u0275text"](42,"*"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275element"](43,"input",20),d["\u0275\u0275pipe"](44,"translate"),d["\u0275\u0275element"](45,"nb-datepicker",21,22),d["\u0275\u0275template"](47,g,3,4,"nb-alert",17),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](48,"div",11),d["\u0275\u0275elementStart"](49,"label",23),d["\u0275\u0275text"](50),d["\u0275\u0275pipe"](51,"translate"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](52,"label",24),d["\u0275\u0275text"](53,"*"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275element"](54,"input",25,26),d["\u0275\u0275pipe"](56,"translate"),d["\u0275\u0275template"](57,S,3,4,"nb-alert",17),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](58,"div",27),d["\u0275\u0275elementStart"](59,"label",28),d["\u0275\u0275text"](60),d["\u0275\u0275pipe"](61,"translate"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](62,"label",29),d["\u0275\u0275text"](63,"*"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275element"](64,"input",30,31),d["\u0275\u0275pipe"](66,"translate"),d["\u0275\u0275template"](67,x,3,4,"nb-alert",17),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](68,"div",27),d["\u0275\u0275elementStart"](69,"label",32),d["\u0275\u0275text"](70),d["\u0275\u0275pipe"](71,"translate"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](72,"label",33),d["\u0275\u0275text"](73,"*"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](74,"nb-select",34),d["\u0275\u0275listener"]("selectedChange",(function(e){return t.clear(),t.addProjectInstallment(e)})),d["\u0275\u0275pipe"](75,"translate"),d["\u0275\u0275elementStart"](76,"nb-option",35),d["\u0275\u0275text"](77),d["\u0275\u0275pipe"](78,"translate"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](79,"nb-option",36),d["\u0275\u0275text"](80),d["\u0275\u0275pipe"](81,"translate"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275template"](82,E,3,4,"nb-alert",17),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](83,"div",1),d["\u0275\u0275elementStart"](84,"div",37),d["\u0275\u0275template"](85,V,6,4,"nb-card",38),d["\u0275\u0275template"](86,O,7,4,"nb-card",38),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()),2&e){var n=d["\u0275\u0275reference"](35),a=d["\u0275\u0275reference"](46);d["\u0275\u0275property"]("formGroup",t.forms),d["\u0275\u0275advance"](8),d["\u0275\u0275textInterpolate"](d["\u0275\u0275pipeBind1"](9,42,"projectFinances")),d["\u0275\u0275advance"](5),d["\u0275\u0275property"]("status","success")("shape","round")("size","medium")("routerLink",d["\u0275\u0275pureFunction0"](72,A)),d["\u0275\u0275advance"](1),d["\u0275\u0275textInterpolate1"](" ",d["\u0275\u0275pipeBind1"](15,44,"viewAll")," "),d["\u0275\u0275advance"](3),d["\u0275\u0275property"]("disabled",t.forms.invalid||t.isEditMode)("shape","round")("status","danger")("shape","success")("size","medium"),d["\u0275\u0275advance"](1),d["\u0275\u0275textInterpolate1"](" ",d["\u0275\u0275pipeBind1"](19,46,"save")," "),d["\u0275\u0275advance"](7),d["\u0275\u0275property"]("field",t.project)("form",t.forms)("isEditMode",t.isEditMode),d["\u0275\u0275advance"](3),d["\u0275\u0275textInterpolate"](d["\u0275\u0275pipeBind1"](29,48,"instalmentFromDate")),d["\u0275\u0275advance"](4),d["\u0275\u0275propertyInterpolate"]("placeholder",d["\u0275\u0275pipeBind1"](33,50,"instalmentFromDate")),d["\u0275\u0275property"]("readOnly",t.isEditMode)("nbDatepicker",n),d["\u0275\u0275advance"](4),d["\u0275\u0275property"]("ngIf",t.forms.get("instalmentFromDate").touched&&t.forms.get("instalmentFromDate").invalid),d["\u0275\u0275advance"](3),d["\u0275\u0275textInterpolate"](d["\u0275\u0275pipeBind1"](40,52,"instalmentToDate")),d["\u0275\u0275advance"](4),d["\u0275\u0275propertyInterpolate"]("placeholder",d["\u0275\u0275pipeBind1"](44,54,"instalmentToDate")),d["\u0275\u0275property"]("readOnly",t.isEditMode)("nbDatepicker",a),d["\u0275\u0275advance"](2),d["\u0275\u0275property"]("min",t.forms.get("instalmentFromDate").value),d["\u0275\u0275advance"](2),d["\u0275\u0275property"]("ngIf",t.forms.get("instalmentToDate").touched&&t.forms.get("instalmentToDate").invalid),d["\u0275\u0275advance"](3),d["\u0275\u0275textInterpolate"](d["\u0275\u0275pipeBind1"](51,56,"totalProjectCost")),d["\u0275\u0275advance"](4),d["\u0275\u0275propertyInterpolate"]("placeholder",d["\u0275\u0275pipeBind1"](56,58,"total Instalment Cost")),d["\u0275\u0275property"]("readOnly",t.isEditMode),d["\u0275\u0275advance"](3),d["\u0275\u0275property"]("ngIf",t.forms.get("totalProjectCost").touched&&t.forms.get("totalProjectCost").invalid),d["\u0275\u0275advance"](3),d["\u0275\u0275textInterpolate"](d["\u0275\u0275pipeBind1"](61,60,"totalInstalmentCost")),d["\u0275\u0275advance"](4),d["\u0275\u0275propertyInterpolate"]("placeholder",d["\u0275\u0275pipeBind1"](66,62,"total Instalment Cost")),d["\u0275\u0275advance"](3),d["\u0275\u0275property"]("ngIf",t.forms.get("totalInstalmentCost").touched&&t.forms.get("totalInstalmentCost").invalid),d["\u0275\u0275advance"](3),d["\u0275\u0275textInterpolate"](d["\u0275\u0275pipeBind1"](71,64,"instalmentType")),d["\u0275\u0275advance"](4),d["\u0275\u0275propertyInterpolate"]("placeholder",d["\u0275\u0275pipeBind1"](75,66,"instalmentType")),d["\u0275\u0275property"]("disabled",null==t.forms.get("project")||t.isEditMode),d["\u0275\u0275advance"](3),d["\u0275\u0275textInterpolate1"]("",d["\u0275\u0275pipeBind1"](78,68,"byMonth")," "),d["\u0275\u0275advance"](3),d["\u0275\u0275textInterpolate1"](" ",d["\u0275\u0275pipeBind1"](81,70,"byProgress"),""),d["\u0275\u0275advance"](2),d["\u0275\u0275property"]("ngIf",t.forms.get("instalmentType").touched&&t.forms.get("instalmentType").invalid),d["\u0275\u0275advance"](3),d["\u0275\u0275property"]("ngIf","byMonth"==t.forms.get("instalmentType").value),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf","byProgress"==t.forms.get("instalmentType").value)}},directives:[i.H,i.s,i.k,b.p,b.s,b.l,s.e,s.d,b.o,y.a,b.K,i.c,b.B,i.r,i.i,b.A,r.u,i.x,b.mb,b.bb,b.j,r.t,b.g],pipes:[p.d],styles:[""]}),N),_=[{path:"",component:m,children:[{path:"",component:f},{path:"all",component:f},{path:"control",component:z},{path:"view/:entityId",component:z}]}],R=((q=function e(){_classCallCheck(this,e)}).\u0275mod=d["\u0275\u0275defineNgModule"]({type:q}),q.\u0275inj=d["\u0275\u0275defineInjector"]({factory:function(e){return new(e||q)},imports:[[s.g.forChild(_)],s.g]}),q),L=n("PAYq"),G=n("pxUr");n.d(t,"ProjectFinanceModule",(function(){return U}));var J,U=((J=function e(){_classCallCheck(this,e)}).\u0275mod=d["\u0275\u0275defineNgModule"]({type:J}),J.\u0275inj=d["\u0275\u0275defineInjector"]({factory:function(e){return new(e||J)},imports:[[r.c,R,p.c,o.a,L.a,b.t,b.L,b.ob,i.m,i.B,b.k,G.b,b.m,b.V,b.i,b.C,b.V]]}),J)}}]);