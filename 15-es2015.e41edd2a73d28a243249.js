(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{BWot:function(e,t,n){"use strict";n.r(t);var a=n("ofXK"),l=n("3Pt+"),r=n("Tk/f"),i=n("tyNb"),o=n("fXoL");let s=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-project-finance"]],decls:1,vars:0,template:function(e,t){1&e&&o["\u0275\u0275element"](0,"router-outlet")},directives:[i.h],styles:[""]}),e})();var d=n("uZM4"),m=n("sYmb"),p=n("944j");let c=(()=>{class e{constructor(e,t,n){this.translate=e,this.override=t,this.datepipe=n,this.entityData={name:"projectFinances",all:{columnDefs:[{headerName:this.translate.instant("id"),field:"id",checkboxSelection:!0,filter:!0,sortable:!0,editable:!1},{headerName:this.translate.instant("project"),field:this.override.isRTL()?"project.nameAr":"project.nameEn",filter:!0,checkboxSelection:!1,sortable:!0,editable:!1},{headerName:this.translate.instant("instalmentFromDate"),field:"instalmentFromDate",checkboxSelection:!1,filter:!0,sortable:!0,editable:!1,cellRenderer:e=>this.datepipe.transform(e.value,"dd/MM/yyyy")},{headerName:this.translate.instant("instalmentToDate"),field:"instalmentToDate",checkboxSelection:!1,filter:!0,sortable:!0,editable:!1,cellRenderer:e=>this.datepipe.transform(e.value,"dd/MM/yyyy")},{headerName:this.translate.instant("instalmentType"),field:"instalmentType",checkboxSelection:!1,filter:!0,sortable:!0,editable:!1,cellRenderer:e=>this.translate.instant(e.value)},{headerName:this.translate.instant("totalInstalmentCost"),field:"totalInstalmentCost",checkboxSelection:!1,filter:!0,sortable:!0,editable:!1},{headerName:this.translate.instant("totalProjectCost"),field:"totalProjectCost",checkboxSelection:!1,filter:!0,sortable:!0,editable:!1}]},edit:!1,view:!0,add:!0,delete:!0,upload:!1}}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](m.e),o["\u0275\u0275directiveInject"](d.a),o["\u0275\u0275directiveInject"](a.f))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-all-project-finance"]],decls:1,vars:1,consts:[[3,"entityData"]],template:function(e,t){1&e&&o["\u0275\u0275element"](0,"app-all-generic",0),2&e&&o["\u0275\u0275property"]("entityData",t.entityData)},directives:[p.a],styles:[""]}),e})();var u=n("JuyU"),f=n("m01I"),h=n("aceb"),b=n("EMTt");function v(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"nb-alert",39),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate2"]("","instalmentFromDate"," ",o["\u0275\u0275pipeBind1"](2,2,"is Invalid")," "))}function I(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"nb-alert",39),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate2"]("","instalmentToDate"," ",o["\u0275\u0275pipeBind1"](2,2,"is Invalid")," "))}function g(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"nb-alert",39),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate2"]("","totalProjectCost"," ",o["\u0275\u0275pipeBind1"](2,2,"is Invalid")," "))}function y(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"nb-alert",39),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate2"]("","totalInstalmentCost"," ",o["\u0275\u0275pipeBind1"](2,2,"is Invalid")," "))}function S(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"nb-alert",39),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate2"]("","instalmentType"," ",o["\u0275\u0275pipeBind1"](2,2,"is Invalid")," "))}function x(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"nb-alert",39),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate2"]("","dueDate"," ",o["\u0275\u0275pipeBind1"](2,2,"is Invalid")," "))}function E(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"nb-alert",39),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate2"]("","instalmentValue"," ",o["\u0275\u0275pipeBind1"](2,2,"is Invalid")," "))}function j(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"nb-alert",39),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate2"]("","instalmentStatus"," ",o["\u0275\u0275pipeBind1"](2,2,"is Invalid")," "))}function C(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",57),o["\u0275\u0275elementStart"](1,"div",58),o["\u0275\u0275elementStart"](2,"nb-action",59),o["\u0275\u0275listener"]("click",(function(){o["\u0275\u0275restoreView"](e);const t=o["\u0275\u0275nextContext"](3);return t.addProjectInstallment(t.forms.get("instalmentType").value)})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"nb-action",60),o["\u0275\u0275listener"]("click",(function(){o["\u0275\u0275restoreView"](e);const t=o["\u0275\u0275nextContext"]().index;return o["\u0275\u0275nextContext"](2).removeProjectInstallment(t)})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}}function k(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",41),o["\u0275\u0275elementStart"](1,"div",42),o["\u0275\u0275elementStart"](2,"label",43),o["\u0275\u0275text"](3),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"label",44),o["\u0275\u0275text"](6,"*"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](7,"input",45),o["\u0275\u0275element"](8,"nb-datepicker",null,46),o["\u0275\u0275template"](10,x,3,4,"nb-alert",17),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](11,"div",42),o["\u0275\u0275elementStart"](12,"label",47),o["\u0275\u0275text"](13),o["\u0275\u0275pipe"](14,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](15,"label",48),o["\u0275\u0275text"](16,"*"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](17,"input",49,50),o["\u0275\u0275listener"]("change",(function(){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"](2).calculateProjectTotal()})),o["\u0275\u0275pipe"](19,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](20,E,3,4,"nb-alert",17),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](21,"div"),o["\u0275\u0275elementStart"](22,"label",51),o["\u0275\u0275text"](23),o["\u0275\u0275pipe"](24,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](25,"label",52),o["\u0275\u0275text"](26,"*"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](27,"nb-select",53),o["\u0275\u0275pipe"](28,"translate"),o["\u0275\u0275elementStart"](29,"nb-option",54),o["\u0275\u0275text"](30),o["\u0275\u0275pipe"](31,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](32,"nb-option",55),o["\u0275\u0275text"](33),o["\u0275\u0275pipe"](34,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](35,j,3,4,"nb-alert",17),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](36,C,4,0,"div",56),o["\u0275\u0275element"](37,"hr"),o["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,r=t.index,i=o["\u0275\u0275reference"](9),s=o["\u0275\u0275nextContext"](2);var n=null;const d=(null==(n=s.projectInstalments.controls[r].get("dueDate"))?null:n.touched)&&(null==(n=s.projectInstalments.controls[r].get("dueDate"))?null:n.invalid);var a=null;const m=(null==(a=s.projectInstalments.controls[r].get("instalmentValue"))?null:a.touched)&&(null==(a=s.projectInstalments.controls[r].get("instalmentValue"))?null:a.invalid);var l=null;const p=(null==(l=s.projectInstalments.controls[r].get("instalmentStatus"))?null:l.touched)&&(null==(l=s.projectInstalments.controls[r].get("instalmentStatus"))?null:l.invalid);o["\u0275\u0275property"]("formGroup",e),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](4,17,"dueDate")),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("readOnly",s.isEditMode)("nbDatepicker",i),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngIf",d),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](14,19,"instalmentValue")),o["\u0275\u0275advance"](4),o["\u0275\u0275propertyInterpolate"]("placeholder",o["\u0275\u0275pipeBind1"](19,21,"Instalment Value")),o["\u0275\u0275property"]("readOnly",s.isEditMode),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngIf",m),o["\u0275\u0275advance"](1),o["\u0275\u0275attribute"]("class",s.isEditMode?"col-md-3":"col-md-2"),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](24,23,"instalmentStatus")),o["\u0275\u0275advance"](4),o["\u0275\u0275propertyInterpolate"]("placeholder",o["\u0275\u0275pipeBind1"](28,25,"Instalment Status")),o["\u0275\u0275property"]("disabled",s.isEditMode),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"]("",o["\u0275\u0275pipeBind1"](31,27,"Paid")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](34,29,"unPaid")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",p),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!s.isEditMode)}}function D(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"nb-card"),o["\u0275\u0275elementStart"](1,"nb-card-header"),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"nb-card-body"),o["\u0275\u0275template"](5,k,38,31,"div",40),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](3,2,"Installments")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngForOf",e.projectInstalments.controls)}}function w(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"entity",64),o["\u0275\u0275listener"]("formValue",(function(t){o["\u0275\u0275restoreView"](e);const n=o["\u0275\u0275nextContext"]().index;return o["\u0275\u0275nextContext"](2).receiveWorkStage(t,n)})),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]().$implicit,t=o["\u0275\u0275nextContext"](2);o["\u0275\u0275property"]("field",t.relatedWorkStage)("form",e)}}function V(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"nb-alert",39),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate2"]("","relatedWorkStage"," ",o["\u0275\u0275pipeBind1"](2,2,"is Invalid")," "))}function T(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"nb-alert",39),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate2"]("","instalmentValue"," ",o["\u0275\u0275pipeBind1"](2,2,"is Invalid")," "))}function B(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"nb-alert",39),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate2"]("","instalmentStatus"," ",o["\u0275\u0275pipeBind1"](2,2,"is Invalid")," "))}function F(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",57),o["\u0275\u0275elementStart"](1,"div",58),o["\u0275\u0275elementStart"](2,"nb-action",59),o["\u0275\u0275listener"]("click",(function(){o["\u0275\u0275restoreView"](e);const t=o["\u0275\u0275nextContext"](3);return t.addProjectInstallment(t.forms.get("instalmentType").value)})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"nb-action",60),o["\u0275\u0275listener"]("click",(function(){o["\u0275\u0275restoreView"](e);const t=o["\u0275\u0275nextContext"]().index;return o["\u0275\u0275nextContext"](2).removeProjectInstallment(t)})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}}function P(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",41),o["\u0275\u0275elementStart"](1,"div",42),o["\u0275\u0275elementStart"](2,"label",61),o["\u0275\u0275text"](3),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"label",62),o["\u0275\u0275text"](6,"*"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](7,w,1,2,"entity",63),o["\u0275\u0275template"](8,V,3,4,"nb-alert",17),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](9,"div",42),o["\u0275\u0275elementStart"](10,"label",47),o["\u0275\u0275text"](11),o["\u0275\u0275pipe"](12,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](13,"label",48),o["\u0275\u0275text"](14,"*"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](15,"input",49,50),o["\u0275\u0275listener"]("change",(function(){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"](2).calculateProjectTotal()})),o["\u0275\u0275pipe"](17,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](18,T,3,4,"nb-alert",17),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](19,"div"),o["\u0275\u0275elementStart"](20,"label",51),o["\u0275\u0275text"](21),o["\u0275\u0275pipe"](22,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](23,"label",52),o["\u0275\u0275text"](24,"*"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](25,"nb-select",53),o["\u0275\u0275pipe"](26,"translate"),o["\u0275\u0275elementStart"](27,"nb-option",54),o["\u0275\u0275text"](28),o["\u0275\u0275pipe"](29,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](30,"nb-option",55),o["\u0275\u0275text"](31),o["\u0275\u0275pipe"](32,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](33,B,3,4,"nb-alert",17),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](34,F,4,0,"div",56),o["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,r=t.index,i=o["\u0275\u0275nextContext"](2);var n=null;const s=(null==(n=i.projectInstalments.controls[r].get("relatedWorkStage"))?null:n.touched)&&(null==(n=i.projectInstalments.controls[r].get("relatedWorkStage"))?null:n.invalid);var a=null;const d=(null==(a=i.projectInstalments.controls[r].get("instalmentValue"))?null:a.touched)&&(null==(a=i.projectInstalments.controls[r].get("instalmentValue"))?null:a.invalid);var l=null;const m=(null==(l=i.projectInstalments.controls[r].get("instalmentStatus"))?null:l.touched)&&(null==(l=i.projectInstalments.controls[r].get("instalmentStatus"))?null:l.invalid);o["\u0275\u0275property"]("formGroup",e),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](4,16,"relatedWorkStage")),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("ngIf",null!=i.forms.get("project").value.id),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",s),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](12,18,"instalmentValue")),o["\u0275\u0275advance"](4),o["\u0275\u0275propertyInterpolate"]("placeholder",o["\u0275\u0275pipeBind1"](17,20,"instalment Value")),o["\u0275\u0275property"]("readOnly",i.isEditMode),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngIf",d),o["\u0275\u0275advance"](1),o["\u0275\u0275attribute"]("class",i.isEditMode?"col-md-3":"col-md-2"),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](22,22,"instalmentStatus")),o["\u0275\u0275advance"](4),o["\u0275\u0275propertyInterpolate"]("placeholder",o["\u0275\u0275pipeBind1"](26,24,"instalment Status")),o["\u0275\u0275property"]("disabled",i.isEditMode),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"]("",o["\u0275\u0275pipeBind1"](29,26,"Paid")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](32,28,"unPaid")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",m),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!i.isEditMode)}}function M(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"nb-card"),o["\u0275\u0275elementStart"](1,"nb-card-header"),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"nb-card-body"),o["\u0275\u0275elementStart"](5,"nb-card-body"),o["\u0275\u0275template"](6,P,35,30,"div",40),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](3,2,"Installments")," "),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("ngForOf",e.projectInstalments.controls)}}const W=function(){return["/pages/projectFinances/all"]};let N=(()=>{class e{constructor(e,t,n,a,r,i,o){this.fb=e,this.override=t,this.translate=n,this.entity=a,this.dp=r,this.router=i,this.route=o,this.isEditMode=!1,this.forms=this.fb.group({id:this.fb.control(null),instalmentFromDate:this.fb.control(null,[l.F.required]),instalmentToDate:this.fb.control(null,[l.F.required]),instalmentType:this.fb.control(null,[l.F.required]),totalProjectCost:this.fb.control(0,[l.F.required]),totalInstalmentCost:this.fb.control(0,[l.F.required]),project:this.fb.control(null,[l.F.required]),projectInstalments:this.fb.array([])}),this.relatedWorkStage={name:"relatedWorkStage",from:"projectWorkStage",label:this.translate.instant("related Work Stage"),required:!0,isEntity:!0,fromArray:!0,optionName:this.override.isRTL()?"workStage.nameAr":"workStage.nameEn",disabled:!1,columns:[{view:this.translate.instant("id"),col:"id"},{view:this.translate.instant("name"),col:this.override.isRTL()?"workStage.nameAr":"workStage.nameEn"},{view:this.translate.instant("workType"),col:"workStage.workType"},{view:this.translate.instant("completionRate"),col:"completionRate"}],exludeView:["createdAt","updatedAt"]},this.project={type:"entity",name:"project",from:"project",label:this.translate.instant("Project"),required:!0,class:"col-md-6",isEntity:!0,optionName:this.override.isRTL()?"nameAr":"nameEn",disabled:!1,multiple:!1,readonly:!1,details:this.translate.instant("Select Project"),validators:[l.F.required,this.override.validateEntityId.bind(this)],exludeView:["imageUrl","projectCategory","projectOwner","contractor","projectManager","locationLat","locationLng","areaRadius","ownerReview","ownerRating","updatedAt","createdAt"],localized:["workType","projectStatus"]}}ngOnInit(){this.entityId=this.route.snapshot.paramMap.get("entityId"),this.entityId&&(this.isEditMode=!0,this.entity.getOne(f.a.projectFinances.getOne,this.entityId).then(e=>{e.subscribe(e=>{this.forms.get("id").setValue(e.id),this.forms.get("instalmentFromDate").setValue(new Date(e.instalmentFromDate)),this.forms.get("instalmentToDate").setValue(new Date(e.instalmentToDate)),this.forms.get("instalmentType").setValue(e.instalmentType),this.forms.get("totalProjectCost").setValue(e.totalProjectCost),this.forms.get("totalInstalmentCost").setValue(e.totalInstalmentCost),this.forms.get("project").setValue({id:e.project.id,nameAr:e.project.nameAr,nameEn:e.project.nameEn}),e.projectInstalments.forEach(t=>{this.addProjectInstallment(e.instalmentType)}),this.forms.get("projectInstalments").setValue(e.projectInstalments)})}))}get projectInstalments(){return this.forms.get("projectInstalments")}clear(){this.projectInstalments.clear(),this.calculateProjectTotal()}addProjectInstallment(e){switch(e){case"byMonth":{let e=this.fb.group({id:this.fb.control(null),projectFinances:this.fb.control(null),relatedWorkStage:this.fb.control(null),dueDate:this.fb.control(null,[l.F.required]),instalmentValue:this.fb.control(0,[l.F.required]),instalmentStatus:this.fb.control(null,[l.F.required])});this.projectInstalments.push(e);break}case"byProgress":{let e=this.fb.group({id:this.fb.control(null),projectFinances:this.fb.control(null),dueDate:this.fb.control(null),relatedWorkStage:this.fb.control(null,[l.F.required]),instalmentValue:this.fb.control(0,[l.F.required]),instalmentStatus:this.fb.control(null,[l.F.required])});this.projectInstalments.push(e);break}}}receiveWorkStage(e,t){this.projectInstalments.controls[t].get("relatedWorkStage").setValue(e.relatedWorkStage)}removeProjectInstallment(e){this.projectInstalments.length>1&&this.projectInstalments.removeAt(e)}check(){console.log(this.forms)}recieveProject(e){this.relatedWorkStage.pathParams=[{key:"projectId",value:e.project.id}],this.forms.get("project").setValue(e.project)}onSubmit(){let e={project:this.forms.get("project").value,instalmentFromDate:this.dp.transform(this.forms.get("instalmentFromDate").value,"yyyy-MM-dd"),instalmentToDate:this.dp.transform(this.forms.get("instalmentToDate").value,"yyyy-MM-dd"),totalInstalmentCost:this.forms.get("totalInstalmentCost").value,totalProjectCost:this.forms.get("totalInstalmentCost").value,instalmentType:this.forms.get("instalmentType").value,projectInstalments:[]};this.forms.get("projectInstalments").value.forEach(t=>{switch(e.instalmentType){case"byMonth":{let n={dueDate:this.dp.transform(t.dueDate,"yyyy-MM-dd"),instalmentStatus:t.instalmentStatus,instalmentValue:t.instalmentValue};e.projectInstalments.push(n);break}case"byProgress":e.projectInstalments.push({relatedWorkStage:t.relatedWorkStage,instalmentStatus:t.instalmentStatus,instalmentValue:t.instalmentValue})}}),this.entity.save(f.a.projectFinances.post,e).then(e=>{e.subscribe(e=>{this.router.navigate(["/pages/projectFinances/all"])})})}calculateProjectTotal(){let e=0;this.projectInstalments.value.forEach(t=>{e+=t.instalmentValue}),this.forms.get("totalInstalmentCost").setValue(e)}}return e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](l.f),o["\u0275\u0275directiveInject"](d.a),o["\u0275\u0275directiveInject"](m.e),o["\u0275\u0275directiveInject"](u.a),o["\u0275\u0275directiveInject"](a.f),o["\u0275\u0275directiveInject"](i.c),o["\u0275\u0275directiveInject"](i.a))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-project-finance-control"]],decls:87,vars:73,consts:[[3,"formGroup"],[1,"row"],[1,"col-md-12"],[1,"row","colors"],[1,"col-8","item","text-heading"],[1,"col"],[1,"text-info"],[1,"col","text-center"],[1,"col-auto"],["nbButton","","hero","","routerLinkActive","router-link-active",3,"status","shape","size","routerLink"],["nbButton","","hero","","hero","",3,"disabled","shape","status","size","click"],[1,"col-md-3"],["id","project",3,"field","form","isEditMode","formValue"],["for","instalmentFromDate",1,"label"],["for","instalmentFromDate",1,"label","text-danger"],["nbInput","","fullWidth","","fieldSize","medium","shape","rectangle","id","instalmentFromDate","formControlName","instalmentFromDate",3,"readOnly","placeholder","nbDatepicker"],["instalmentFromDate",""],["status","warning","accent","primary",4,"ngIf"],["for","instalmentToDate",1,"label"],["for","instalmentToDate",1,"label","text-danger"],["nbInput","","fullWidth","","fieldSize","medium","shape","rectangle","id","instalmentToDate","formControlName","instalmentToDate",3,"readOnly","placeholder","nbDatepicker"],[3,"min"],["instalmentToDate",""],["for","totalProjectCost",1,"label"],["for","totalProjectCost",1,"label","text-danger"],["type","number","formControlName","totalProjectCost","id","totalProjectCost","nbInput","","fullWidth","","fieldSize","medium","shape","rectangle",3,"readOnly","placeholder"],["totalProjectCost",""],[1,"col-md-6"],["for","totalInstalmentCost",1,"label"],["for","totalInstalmentCost",1,"label","text-danger"],["readonly","","type","number","formControlName","totalInstalmentCost","id","totalInstalmentCost","nbInput","","fullWidth","","fieldSize","medium","shape","rectangle",3,"placeholder"],["totalInstalmentCost",""],["for","instalmentType",1,"label"],["for","instalmentType",1,"label","text-danger"],["selected","byMonth","formControlName","instalmentType","fullWidth","","fieldSize","medium","shape","rectangle",3,"disabled","placeholder","selectedChange"],["value","byMonth"],["value","byProgress"],[1,"col-12"],[4,"ngIf"],["status","warning","accent","primary"],["class","row",3,"formGroup",4,"ngFor","ngForOf"],[1,"row",3,"formGroup"],[1,"col-md-4"],["for","dueDate",1,"label"],["for","dueDate",1,"label","text-danger"],["nbInput","","fullWidth","","fieldSize","medium","shape","rectangle","id","dueDate","placeholder","Due Date","formControlName","dueDate",3,"readOnly","nbDatepicker"],["dueDate",""],["for","instalmentValue",1,"label"],["for","instalmentValue",1,"label","text-danger"],["type","number","formControlName","instalmentValue","id","instalmentValue","nbInput","","fullWidth","","fieldSize","medium","shape","rectangle",3,"readOnly","placeholder","change"],["instalmentValue",""],["for","instalmentStatus",1,"label"],["for","instalmentStatus",1,"label","text-danger"],["formControlName","instalmentStatus","fullWidth","","fieldSize","medium","shape","rectangle",3,"disabled","placeholder"],["value","paid"],["value","unPaid"],["class","col-1",4,"ngIf"],[1,"col-1"],[1,"row","pt-3"],["icon","plus",1,"col",3,"click"],["icon","trash",1,"col",3,"click"],["for","relatedWorkStage",1,"label"],["for","relatedWorkStage",1,"label","text-danger"],["id","entity",3,"field","form","formValue",4,"ngIf"],["id","entity",3,"field","form","formValue"]],template:function(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"form",0),o["\u0275\u0275elementStart"](1,"div",1),o["\u0275\u0275elementStart"](2,"nb-card",2),o["\u0275\u0275elementStart"](3,"nb-card-header",3),o["\u0275\u0275elementStart"](4,"div",4),o["\u0275\u0275elementStart"](5,"div",1),o["\u0275\u0275elementStart"](6,"div",5),o["\u0275\u0275elementStart"](7,"h4",6),o["\u0275\u0275text"](8),o["\u0275\u0275pipe"](9,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](10,"div",7),o["\u0275\u0275elementStart"](11,"div",1),o["\u0275\u0275elementStart"](12,"div",8),o["\u0275\u0275elementStart"](13,"button",9),o["\u0275\u0275text"](14),o["\u0275\u0275pipe"](15,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](16,"div",8),o["\u0275\u0275elementStart"](17,"button",10),o["\u0275\u0275listener"]("click",(function(){return t.onSubmit()})),o["\u0275\u0275text"](18),o["\u0275\u0275pipe"](19,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](20,"div",1),o["\u0275\u0275elementStart"](21,"nb-card",2),o["\u0275\u0275elementStart"](22,"nb-card-body"),o["\u0275\u0275elementStart"](23,"div",1),o["\u0275\u0275elementStart"](24,"div",11),o["\u0275\u0275elementStart"](25,"entity",12),o["\u0275\u0275listener"]("formValue",(function(e){return t.recieveProject(e)})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](26,"div",11),o["\u0275\u0275elementStart"](27,"label",13),o["\u0275\u0275text"](28),o["\u0275\u0275pipe"](29,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](30,"label",14),o["\u0275\u0275text"](31,"*"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](32,"input",15),o["\u0275\u0275pipe"](33,"translate"),o["\u0275\u0275element"](34,"nb-datepicker",null,16),o["\u0275\u0275template"](36,v,3,4,"nb-alert",17),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](37,"div",11),o["\u0275\u0275elementStart"](38,"label",18),o["\u0275\u0275text"](39),o["\u0275\u0275pipe"](40,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](41,"label",19),o["\u0275\u0275text"](42,"*"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](43,"input",20),o["\u0275\u0275pipe"](44,"translate"),o["\u0275\u0275element"](45,"nb-datepicker",21,22),o["\u0275\u0275template"](47,I,3,4,"nb-alert",17),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](48,"div",11),o["\u0275\u0275elementStart"](49,"label",23),o["\u0275\u0275text"](50),o["\u0275\u0275pipe"](51,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](52,"label",24),o["\u0275\u0275text"](53,"*"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](54,"input",25,26),o["\u0275\u0275pipe"](56,"translate"),o["\u0275\u0275template"](57,g,3,4,"nb-alert",17),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](58,"div",27),o["\u0275\u0275elementStart"](59,"label",28),o["\u0275\u0275text"](60),o["\u0275\u0275pipe"](61,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](62,"label",29),o["\u0275\u0275text"](63,"*"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](64,"input",30,31),o["\u0275\u0275pipe"](66,"translate"),o["\u0275\u0275template"](67,y,3,4,"nb-alert",17),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](68,"div",27),o["\u0275\u0275elementStart"](69,"label",32),o["\u0275\u0275text"](70),o["\u0275\u0275pipe"](71,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](72,"label",33),o["\u0275\u0275text"](73,"*"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](74,"nb-select",34),o["\u0275\u0275listener"]("selectedChange",(function(e){return t.clear(),t.addProjectInstallment(e)})),o["\u0275\u0275pipe"](75,"translate"),o["\u0275\u0275elementStart"](76,"nb-option",35),o["\u0275\u0275text"](77),o["\u0275\u0275pipe"](78,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](79,"nb-option",36),o["\u0275\u0275text"](80),o["\u0275\u0275pipe"](81,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](82,S,3,4,"nb-alert",17),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](83,"div",1),o["\u0275\u0275elementStart"](84,"div",37),o["\u0275\u0275template"](85,D,6,4,"nb-card",38),o["\u0275\u0275template"](86,M,7,4,"nb-card",38),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275reference"](35),n=o["\u0275\u0275reference"](46);o["\u0275\u0275property"]("formGroup",t.forms),o["\u0275\u0275advance"](8),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](9,42,"projectFinances")),o["\u0275\u0275advance"](5),o["\u0275\u0275property"]("status","success")("shape","round")("size","medium")("routerLink",o["\u0275\u0275pureFunction0"](72,W)),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](15,44,"viewAll")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("disabled",t.forms.invalid||t.isEditMode)("shape","round")("status","danger")("shape","success")("size","medium"),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](19,46,"save")," "),o["\u0275\u0275advance"](7),o["\u0275\u0275property"]("field",t.project)("form",t.forms)("isEditMode",t.isEditMode),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](29,48,"instalmentFromDate")),o["\u0275\u0275advance"](4),o["\u0275\u0275propertyInterpolate"]("placeholder",o["\u0275\u0275pipeBind1"](33,50,"instalmentFromDate")),o["\u0275\u0275property"]("readOnly",t.isEditMode)("nbDatepicker",e),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("ngIf",t.forms.get("instalmentFromDate").touched&&t.forms.get("instalmentFromDate").invalid),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](40,52,"instalmentToDate")),o["\u0275\u0275advance"](4),o["\u0275\u0275propertyInterpolate"]("placeholder",o["\u0275\u0275pipeBind1"](44,54,"instalmentToDate")),o["\u0275\u0275property"]("readOnly",t.isEditMode)("nbDatepicker",n),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("min",t.forms.get("instalmentFromDate").value),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",t.forms.get("instalmentToDate").touched&&t.forms.get("instalmentToDate").invalid),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](51,56,"totalProjectCost")),o["\u0275\u0275advance"](4),o["\u0275\u0275propertyInterpolate"]("placeholder",o["\u0275\u0275pipeBind1"](56,58,"total Instalment Cost")),o["\u0275\u0275property"]("readOnly",t.isEditMode),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngIf",t.forms.get("totalProjectCost").touched&&t.forms.get("totalProjectCost").invalid),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](61,60,"totalInstalmentCost")),o["\u0275\u0275advance"](4),o["\u0275\u0275propertyInterpolate"]("placeholder",o["\u0275\u0275pipeBind1"](66,62,"total Instalment Cost")),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngIf",t.forms.get("totalInstalmentCost").touched&&t.forms.get("totalInstalmentCost").invalid),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](71,64,"instalmentType")),o["\u0275\u0275advance"](4),o["\u0275\u0275propertyInterpolate"]("placeholder",o["\u0275\u0275pipeBind1"](75,66,"instalmentType")),o["\u0275\u0275property"]("disabled",null==t.forms.get("project")||t.isEditMode),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"]("",o["\u0275\u0275pipeBind1"](78,68,"byMonth")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](81,70,"byProgress"),""),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",t.forms.get("instalmentType").touched&&t.forms.get("instalmentType").invalid),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngIf","byMonth"==t.forms.get("instalmentType").value),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf","byProgress"==t.forms.get("instalmentType").value)}},directives:[l.H,l.s,l.k,h.p,h.s,h.l,i.e,i.d,h.o,b.a,h.K,l.c,h.B,l.r,l.i,h.A,a.u,l.x,h.mb,h.bb,h.j,a.t,h.g],pipes:[m.d],styles:[""]}),e})();const O=[{path:"",component:s,children:[{path:"",component:c},{path:"all",component:c},{path:"control",component:N},{path:"view/:entityId",component:N}]}];let q=(()=>{class e{}return e.\u0275mod=o["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=o["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.g.forChild(O)],i.g]}),e})();var A=n("PAYq"),z=n("pxUr");n.d(t,"ProjectFinanceModule",(function(){return R}));let R=(()=>{class e{}return e.\u0275mod=o["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=o["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[a.c,q,m.c,r.a,A.a,h.t,h.L,h.ob,l.m,l.B,h.k,z.b,h.m,h.V,h.i,h.C,h.V]]}),e})()}}]);